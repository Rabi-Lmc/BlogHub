;/*FB_PKG_DELIM*/

__d("WARetryPromise",["Promise","WAAbortError","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return new(h||(h=b("Promise")))(function(f,g){var i=0,j,k=!1;if(e){var l=function(){e.removeEventListener("abort",l),k=!0,j!=null&&clearTimeout(j),g(new(d("WAAbortError").AbortError)())};if(e.aborted){l();return}e.addEventListener("abort",l)}function m(){var d=!1,e=!1;j=null;try{var l=a({retry:function(a){if(k||e)return;d=!0;i++;if(a==null)return m();j=setTimeout(m,a)},failCount:i});if(!(l instanceof(h||(h=b("Promise")))))throw c("err")("TypeError: task must return a promise");l.then(function(a){if(k||d)return;e=!0;f(a)})["catch"](function(a){if(k||d)return;e=!0;g(a)})}catch(a){if(k||d)return;g(a)}}m()})}g["default"]=a}),98);
__d("WABackoff",["Promise","WARetryPromise","WARetryableError","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i=Object.freeze({timeoutIncludesTaskDuration:!0});function a(a,d){a=babelHelpers["extends"]({},i,a);var e=a.signal,f=a.timeoutIterator,g=a.timeoutIncludesTaskDuration;return c("WARetryPromise")(function(a){var e=a.retry,i=a.failCount;return new(h||(h=b("Promise")))(function(a,j){var k=Date.now();try{d(l,i).then(a)["catch"](m)}catch(a){m(c("getErrorSafe")(a));return}function l(a){return(h||(h=b("Promise"))).reject(new(c("WARetryableError"))(a))}function m(a){if(!(a instanceof c("WARetryableError")))return void j(a);var b=f.next();if(b.done)return void j(a.source);a=Date.now()-k;a=g?Math.max(b.value-a,0):b.value;e(a)}})},e)}g.defaults=i;g.backoff=a}),98);
__d("WAExponentialIterator",[],(function(a,b,c,d,e,f){"use strict";function* a(a){var b=1;while(!0)yield b,b*=a}f["default"]=a}),66);
__d("WAExponentialBackoffIterator",["WAExponentialIterator"],(function(a,b,c,d,e,f,g){"use strict";var h={factor:2,jitter:0,maxTimeout:Infinity};function* a(a){a=babelHelpers["extends"]({},h,a);var b=a.factor,d=a.jitter,e=a.maxTimeout,f=a.minTimeout;a=a.retries;var g=0;for(b of c("WAExponentialIterator")(b)){g++;if(g>a)return;var i=1+(Math.random()*d*2-d);yield Math.min(f*b*i,e)}}g.defaults=h;g.exponentialBackoffIterator=a}),98);
__d("WAExponentialBackoff",["WABackoff","WAExponentialBackoffIterator"],(function(a,b,c,d,e,f,g){"use strict";var h=["signal","timeoutIncludesTaskDuration"],i=babelHelpers["extends"]({},d("WAExponentialBackoffIterator").defaults,d("WABackoff").defaults);function a(a,b){a=babelHelpers["extends"]({},i,a);var c=a.signal,e=a.timeoutIncludesTaskDuration;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=d("WAExponentialBackoffIterator").exponentialBackoffIterator(a);return d("WABackoff").backoff({signal:c,timeoutIterator:a,timeoutIncludesTaskDuration:e},b)}g.exponentialBackoff=a}),98);