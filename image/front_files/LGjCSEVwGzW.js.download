;/*FB_PKG_DELIM*/

__d("IGDCreateSlideMessageUpdateQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="25166674749619473"}),null);
__d("IGDCreateSlideMessageUpdateQuery.graphql",["IGDCreateSlideMessageUpdateQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"enable_off_msys_messages_list"},c={defaultValue:null,kind:"LocalArgument",name:"message_id"},d=[{kind:"Variable",name:"id",variableName:"message_id"}],e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"sender_fbid",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"timestamp_ms",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"text_body",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_reported",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"TypeDiscriminator",abstractKey:"__isSlideMessageContent"},m=[k],n={kind:"InlineFragment",selections:[h],type:"SlideMessageText",abstractKey:null},o={alias:null,args:null,kind:"ScalarField",name:"attachment_fbid",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"attachment_cdn_url",storageKey:null},q={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBSlideAudioAttachment",kind:"LinkedField",name:"audio_attachments",plural:!0,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"waveform_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"playable_duration_ms",storageKey:null},p],storageKey:null}],type:"SlideMessageAudiosContent",abstractKey:null},r={alias:null,args:null,kind:"ScalarField",name:"preview_cdn_url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"preview_height",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"preview_width",storageKey:null},u={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBSlideAnimatedMediaAttachment",kind:"LinkedField",name:"animated_media",plural:!0,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"attachment_webp_url",storageKey:null},r,s,t,{alias:null,args:null,kind:"ScalarField",name:"is_sticker",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attachment_mp4_url",storageKey:null}],storageKey:null}],type:"SlideMessageAnimatedMediaContent",abstractKey:null},v={alias:null,args:null,kind:"ScalarField",name:"preview_cdn_fallback_url",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"attachment_cdn_fallback_url",storageKey:null},x=[o,{alias:null,args:null,kind:"ScalarField",name:"attachment_type",storageKey:null},{kind:"InlineFragment",selections:[r,v,s,t,p,w],type:"SlideMessagingMediaAttachment",abstractKey:"__isSlideMessagingMediaAttachment"}],y={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBSlideAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:x,storageKey:null}],type:"SlideMessageImageContent",abstractKey:null},z=[{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},s,t],A={kind:"InlineFragment",selections:z,type:"SlideMessageCutoutStickerXMAContent",abstractKey:null},B={kind:"InlineFragment",selections:z,type:"SlideMessageAIStickerXMAContent",abstractKey:null},C={kind:"InlineFragment",selections:z,type:"SlideMessageStoreStickerContent",abstractKey:null};z={kind:"InlineFragment",selections:z,type:"SlideMessageAvatarStickerXMAContent",abstractKey:null};x={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBSlideVideoAttachment",kind:"LinkedField",name:"videos",plural:!0,selections:x,storageKey:null}],type:"SlideMessageVideosContent",abstractKey:null};var D={alias:null,args:null,kind:"ScalarField",name:"preview_image_decoration_type",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"fallback_url",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},G=[F],H={alias:null,args:null,concreteType:"XFBSlideMessageXMASingleHeaderIcon",kind:"LinkedField",name:"header_icon",plural:!1,selections:G,storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"header_subtitle_text",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"header_title_text",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"verified_type",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"target_url",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"title_text",storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"caption_body_text",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"subtitle_text",storageKey:null},Q={alias:null,args:null,concreteType:"XFBSlideMessageXMAPreviewImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:[E,F,D],storageKey:null},R=[F,E];D={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"xma_text_body",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"xma",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBSlideMessageXMAPreviewImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:[D,E,F],storageKey:null},H,I,J,K,L,M],type:"SlideMessagePortraitXMA",abstractKey:null},{kind:"InlineFragment",selections:[L,M,H,I,J,K,N,O,P,{alias:null,args:null,kind:"ScalarField",name:"subtitle_decoration_type",storageKey:null},{alias:null,args:null,concreteType:"XFBSlideMessageFavicon",kind:"LinkedField",name:"favicon",plural:!1,selections:G,storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"preview_layout_type",storageKey:null},{alias:null,args:null,concreteType:"XFBSlideMessageXMAPreviewImage",kind:"LinkedField",name:"preview_extra_urls_info",plural:!0,selections:R,storageKey:null}],type:"SlideMessageStandardXMA",abstractKey:null},{kind:"InlineFragment",selections:[O],type:"SlideMessageExpiredPlaceholderXMA",abstractKey:null},{kind:"InlineFragment",selections:[N,O],type:"SlideMessagePlaceholderXMA",abstractKey:null},{kind:"InlineFragment",selections:[Q,M,P,N,{alias:null,args:null,concreteType:"XFBSlideMessageFavicon",kind:"LinkedField",name:"favicon",plural:!1,selections:R,storageKey:null}],type:"SlideMessageLayeredXMA",abstractKey:null}],storageKey:null}],type:"SlideMessageXMAContent",abstractKey:null};E={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"messasge_text_body",storageKey:null},{alias:null,args:null,concreteType:"XFBSlideMessageGenAISearchPluginSource",kind:"LinkedField",name:"search_sources",plural:!0,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"source_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"source_url",storageKey:null}],storageKey:null}],type:"SlideMessageGenAISearchPluginResponseXMAContent",abstractKey:null};F={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"unified_response",storageKey:null}],type:"SlideMessageGenAIRichResponseXMAContent",abstractKey:null};L=[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"view_mode",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachment",plural:!1,selections:[k,{kind:"TypeDiscriminator",abstractKey:"__isSlideMessagingMediaAttachment"},r,v,s,t,p,w,o],storageKey:null}],type:"SlideMessageRavenContent",abstractKey:"__isSlideMessageRavenContent"}];H={kind:"InlineFragment",selections:L,type:"SlideMessageRavenImageContent",abstractKey:null};I={kind:"InlineFragment",selections:L,type:"SlideMessageRavenVideoContent",abstractKey:null};J={alias:null,args:null,concreteType:"SlideUser",kind:"LinkedField",name:"sender",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},e],storageKey:null};K={alias:null,args:null,kind:"ScalarField",name:"client__send_status",storageKey:null};return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"IGDCreateSlideMessageUpdateQuery",selections:[{alias:null,args:d,concreteType:"SlideMessage",kind:"LinkedField",name:"fetch__SlideMessage",plural:!1,selections:[{args:[{kind:"Variable",name:"enable_off_msys_messages_list",variableName:"enable_off_msys_messages_list"}],kind:"FragmentSpread",name:"IGDCreateSlideMessage_SlideMessage"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"IGDCreateSlideMessageUpdateQuery",selections:[{alias:null,args:d,concreteType:"SlideMessage",kind:"LinkedField",name:"fetch__SlideMessage",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null},f,g,{alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"igd_snippet",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content_type",storageKey:null},h,{condition:"enable_off_msys_messages_list",kind:"Condition",passingValue:!0,selections:[i,j,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[k,l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBSlideAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:m,storageKey:null}],type:"SlideMessageImageContent",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XFBSlideVideoAttachment",kind:"LinkedField",name:"videos",plural:!0,selections:m,storageKey:null}],type:"SlideMessageVideosContent",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"xma",plural:!1,selections:m,storageKey:null}],type:"SlideMessageXMAContent",abstractKey:null},n,q,u,y,A,B,C,z,x,D,E,F,H,I,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_reaction_action_log",storageKey:null},{alias:null,args:null,concreteType:"XFBTextAppTextFragmentInWWW",kind:"LinkedField",name:"text_fragments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"plaintext",storageKey:null}],storageKey:null}],type:"SlideMessageAdminText",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBSlideReaction",kind:"LinkedField",name:"reactions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null},f],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bot_response_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"igd_is_forwarded",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"replied_to_message_id",storageKey:null},{alias:null,args:null,concreteType:"SlideMessage",kind:"LinkedField",name:"replied_to_message",plural:!1,selections:[j,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content",plural:!1,selections:[k,l,n,q,u,y,A,B,C,z,x,D,E,F,H,I],storageKey:null},e,J,f],storageKey:null},J,{alias:null,args:null,concreteType:"XFBSlideMessageEdit",kind:"LinkedField",name:"slide_edit_history",plural:!0,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},g],storageKey:null},{kind:"ClientExtension",selections:[K]}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"client__timestamp_ms",storageKey:null},K]}],storageKey:null}]},params:{id:b("IGDCreateSlideMessageUpdateQuery_instagramRelayOperation"),metadata:{},name:"IGDCreateSlideMessageUpdateQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("IGDCreateSlideMessage_SlideMessage.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"enable_off_msys_messages_list"}],kind:"Fragment",metadata:null,name:"IGDCreateSlideMessage_SlideMessage",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sender_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},{args:null,kind:"FragmentSpread",name:"IGDThreadLatestMessageSnippet_SlideMessage"},{args:null,kind:"FragmentSpread",name:"XFBIGDirectViewerThreadUnreadMessagesCountResolver_SlideMessage"},{condition:"enable_off_msys_messages_list",kind:"Condition",passingValue:!0,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"IGDMessageListRowOffMsys_SlideMessage"}],type:"SlideMessage",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"message_list_slide_message"}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"client__timestamp_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"client__send_status",storageKey:null}]}],type:"SlideMessage",abstractKey:null};e.exports=a}),null);
__d("IGDCreateSlideMessage",["IGDCreateSlideMessageUpdateQuery.graphql","IGDCreateSlideMessage_SlideMessage.graphql","qex","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("IGDCreateSlideMessage_SlideMessage.graphql");var j=i!==void 0?i:i=b("IGDCreateSlideMessageUpdateQuery.graphql");function a(a,b,e){b=d("relay-runtime").createOperationDescriptor(j,{enable_off_msys_messages_list:c("qex")._("2197"),id:b});a.commitPayload(b,{fetch__SlideMessage:babelHelpers["extends"]({},e)})}g.createSlideMessageRecord=a}),98);
__d("IGDGetSlideMessage",[],(function(a,b,c,d,e,f){"use strict";function g(a){return"SlideMessage:"+a}function a(a,b){return a.get(g(b))}f.GetSlideMessageDataID=g;f.GetSlideMessageNullable=a}),66);
__d("IGDInboxSlideMessagesConnection",["CometRelay","FBLogger","IGDGetThread"],(function(a,b,c,d,e,f,g){"use strict";var h="IGDInbox__slide_messages";function a(a){return d("CometRelay").ConnectionHandler.getConnectionID(d("IGDGetThread").GetXFBIGDirectViewerThreadDataID(a),h)}function b(a){a=d("CometRelay").ConnectionHandler.getConnection(a,h);a==null&&c("FBLogger")("igd_web").warn("IGDInboxSlideMessagesConnection: Messages connection record is null");return a}g.IGD_INBOX_SLIDE_MESSAGES_CONNECTION_KEY=h;g.getConnectionID=a;g.getConnectionNullable=b}),98);
__d("IGDInsertSlideMessageToMessagesConnection",["CometRelay","FBLogger","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=a.get(b);if(f==null){c("FBLogger")("igd_web").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["IGDInsertSlideMessageToMessagesConnection: "," record doesn't exist"])),b);return d("WAResultOrError").makeResult("skip")}d("CometRelay").ConnectionHandler.deleteNode(f,e.getDataID());b=d("CometRelay").ConnectionHandler.createEdge(a,f,e,"XFBIGDirectViewerThreadSlideMessagesEdge");d("CometRelay").ConnectionHandler.insertEdgeBefore(f,b);return d("WAResultOrError").makeResult("success")}g["default"]=a}),98);
__d("IGDMessagesListSlideMessagesConnection",["CometRelay","FBLogger","IGDGetThread"],(function(a,b,c,d,e,f,g){"use strict";var h="IGDMessagesList_slide_messages";function a(a){return d("CometRelay").ConnectionHandler.getConnectionID(d("IGDGetThread").GetXFBIGDirectViewerThreadDataID(a),h)}function b(a){a=d("CometRelay").ConnectionHandler.getConnection(a,h);a==null&&c("FBLogger")("igd_web").warn("IGDMessagesListSlideMessagesConnection: Messages connection record is null");return a}g.IGD_MESSAGES_LIST_SLIDE_MESSAGES_CONNECTION_KEY=h;g.getConnectionID=a;g.getConnectionNullable=b}),98);
__d("IGDSlideBumpThread",["IGDGetThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){a=a.get(d("IGDGetThread").GetXFBIGDirectViewerThreadDataID(b));a==null||a.setValue(c,"last_activity_timestamp_ms")}g["default"]=a}),98);
__d("IGDSlideUpdateReadReceipt",["CometRelay","IGDGetThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f;b=a.get(d("IGDGetThread").GetXFBIGDirectViewerThreadDataID(b));f=(f=b==null?void 0:b.getLinkedRecords("slide_read_receipts"))!=null?f:[];var g=f.find(function(a){return(a==null?void 0:a.getValue("participant_fbid"))===c});if(g==null){a=a.create(d("CometRelay").generateUniqueClientID(),"XFBSlideReadReceipt");a.setValue(c,"participant_fbid");a.setValue(e,"watermark_timestamp_ms");b==null||b.setLinkedRecords([].concat(f,[a]),"slide_read_receipts");return}if(g.getValue("watermark_timestamp_ms")==null)g.setValue(e,"watermark_timestamp_ms");else{b=g.getValue("watermark_timestamp_ms");f=parseInt(b,10);a=parseInt(e,10);a>f&&g.setValue(e,"watermark_timestamp_ms")}}g["default"]=a}),98);
__d("IGDInsertSlideMessage",["IGDCreateSlideMessage","IGDGetSlideMessage","IGDInboxSlideMessagesConnection","IGDInsertSlideMessageToMessagesConnection","IGDMessagesListSlideMessagesConnection","IGDSlideBumpThread","IGDSlideUpdateReadReceipt","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e,f){d("IGDCreateSlideMessage").createSlideMessageRecord(a,e.id,e);var g=d("WAResultOrError").makeResult("skip");a.commitUpdate(function(a){var h=d("IGDGetSlideMessage").GetSlideMessageNullable(a,e.id);h!=null&&(g=c("IGDInsertSlideMessageToMessagesConnection")(a,b,h),c("IGDSlideUpdateReadReceipt")(a,e.thread_fbid,e.sender_fbid,e.timestamp_ms),f==null||f(a))});return g}function a(a,b,d){a=i(a,b,function(a){c("IGDSlideBumpThread")(a,b.thread_fbid,b.timestamp_ms),d==null||d(a)});return a}function i(a,b,c){var e=d("IGDInboxSlideMessagesConnection").getConnectionID(b.thread_fbid);return h(a,e,b,c)}function b(a,b,c){var e=d("IGDMessagesListSlideMessagesConnection").getConnectionID(b.thread_fbid);return h(a,e,b,c)}g.IGDInsertSlideMessageToInbox=a;g.IGDInsertSlideMessageToInboxWithoutBumpThread=i;g.IGDInsertSlideMessageToMessagesList=b}),98);
__d("IGDMqttChannel",["CurrentUser","Env","FBLogger","IGDMqttWebDeviceID","MqttChannel","MqttEnv","MqttEnvInitializer","PolarisLocales","PolarisUA","PolarisViewer","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;c("MqttEnvInitializer").initialize();var i=null;function a(){i==null&&(i=j());return i}function b(){i!=null&&(i.shutdown(),i=null)}function j(){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);var a=d("PolarisUA").isMobile()?1217981644879628:936619743392459,b={},e=d("PolarisLocales").language_code;e!=null&&(b["Accept-Language"]=e);e=new(c("MqttChannel"))({appId:a,appSpecificInfo:b,capabilities:0,chatVisibility:!1,clientCapabilities:1,clientType:"cookie_auth",deviceId:c("IGDMqttWebDeviceID").clientId,endpoint:(h||(h=c("Env"))).ig_mqtt_wss_endpoint||"wss://edge-chat.instagram.com/chat",initialSubscribedTopics:[],pollingEndpoint:(h||(h=c("Env"))).ig_mqtt_polling_endpoint||"https://edge-chat.instagram.com/mqtt/pull",userFbid:c("nullthrows")(d("PolarisViewer").id)});e.subscribeChannelEvents({onJSError:function(a){c("FBLogger")("igd_web_mqtt").catching(a).mustfix("[IGDMqtt]: MQTT JS error encountered")},onMQTTStateChanged:function(a){c("FBLogger")("igd_web_mqtt").debug("[IGDMqtt]: MQTT State has changed %s",a)}});return e}g.getIGDMqttChannel=a;g.shutdownAndClearIGDMqttChannel=b}),98);