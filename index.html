<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlogHub | Share Your Stories</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Variables */
        :root {
            --primary-bg: #0a0a1a;
            --secondary-bg: #15152b;
            --accent-color: #3498db;
            --accent-dark: #2980b9;
            --text-color: #ffffff;
            --text-secondary: #b0b0cc;
            --card-bg: #1e1e3a;
            --hover-color: #4aa8e8;
            --transition: all 0.3s ease;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --border-radius: 8px;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--primary-bg);
            color: var(--text-color);
            line-height: 1.6;
        }

        a {
            text-decoration: none;
            color: var(--accent-color);
            transition: var(--transition);
        }

        button {
            cursor: pointer;
            border: none;
            outline: none;
            transition: var(--transition);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background-color: var(--secondary-bg);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(52, 152, 219, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h1 {
            font-size: 1.8rem;
            background: linear-gradient(to right, var(--accent-color), #4aa8e8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo i {
            color: var(--accent-color);
            font-size: 1.8rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        nav a {
            color: var(--text-color);
            font-weight: 500;
            padding: 0.5rem 0;
            position: relative;
        }

        nav a:hover {
            color: var(--accent-color);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: var(--transition);
        }

        nav a:hover::after {
            width: 100%;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            background-size: cover;
            background-position: center;
            border: 2px solid var(--accent-color);
        }

        .logout-btn {
            background-color: transparent;
            color: var(--text-color);
            border: 1px solid var(--accent-color);
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }

        .logout-btn:hover {
            background-color: var(--accent-color);
            color: var(--primary-bg);
        }

        .create-article-btn {
            background-color: var(--success-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            margin-right: 10px;
        }

        .create-article-btn:hover {
            background-color: #27ae60;
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            color: var(--text-color);
            font-size: 1.5rem;
        }

        .mobile-nav {
            display: none;
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            background-color: var(--secondary-bg);
            padding: 1rem;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            z-index: 99;
        }

        .mobile-nav.active {
            display: block;
        }

        .mobile-nav ul {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .mobile-nav a {
            color: var(--text-color);
            padding: 0.5rem 0;
            display: block;
        }

        /* Main Content Styles */
        main {
            min-height: calc(100vh - 160px);
            padding: 2rem 0;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Login/Signup Page */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .auth-card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }

        .auth-card h2 {
            margin-bottom: 1.5rem;
            color: var(--accent-color);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #333;
        }

        .auth-tab {
            flex: 1;
            padding: 0.8rem;
            background: none;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .auth-tab.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.8rem;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-radius: 4px;
            color: var(--text-color);
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            border-color: var(--accent-color);
        }

        .auth-btn {
            width: 100%;
            padding: 0.8rem;
            background-color: var(--accent-color);
            color: var(--primary-bg);
            border-radius: 4px;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .auth-btn:hover {
            background-color: var(--hover-color);
        }

        .social-login {
            margin-top: 1.5rem;
            border-top: 1px solid #333;
            padding-top: 1.5rem;
        }

        .social-login p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        .social-buttons {
            display: flex;
            gap: 1rem;
        }

        .social-btn {
            flex: 1;
            padding: 0.8rem;
            border-radius: 4px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .google-btn {
            background-color: #db4437;
            color: white;
        }

        .facebook-btn {
            background-color: #4267B2;
            color: white;
        }

        .social-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Home Page */
        .hero {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(rgba(10,10,26,0.8), rgba(10,10,26,0.8)), url('https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--text-secondary);
        }

        .cta-btn {
            background-color: var(--accent-color);
            color: var(--primary-bg);
            padding: 0.8rem 2rem;
            border-radius: 4px;
            font-weight: 600;
            display: inline-block;
        }

        .cta-btn:hover {
            background-color: var(--hover-color);
            transform: translateY(-3px);
        }

        .section-title {
            margin: 2rem 0 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: var(--accent-color);
        }

        .quote-of-day {
            background-color: var(--card-bg);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            border-left: 4px solid var(--accent-color);
        }

        .quote-content {
            font-style: italic;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .quote-author {
            text-align: right;
            color: var(--accent-color);
            font-weight: 500;
        }

        .categories {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .category {
            background-color: var(--card-bg);
            padding: 0.8rem 1.5rem;
            border-radius: 20px;
            font-weight: 500;
            transition: var(--transition);
        }

        .category:hover {
            background-color: var(--accent-color);
            color: var(--primary-bg);
            transform: translateY(-3px);
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .article-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
        }

        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.1);
        }

        .article-img {
            height: 180px;
            background-color: #333;
            background-size: cover;
            background-position: center;
        }

        .article-content {
            padding: 1.5rem;
        }

        .article-content h3 {
            margin-bottom: 0.5rem;
        }

        .article-meta {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .article-excerpt {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .article-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .read-more {
            color: var(--accent-color);
            font-weight: 500;
        }

        .read-more:hover {
            color: var(--hover-color);
        }

        .rating {
            display: flex;
            gap: 5px;
        }

        .star {
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }

        .star:hover, .star.active {
            color: var(--warning-color);
        }

        /* Create Article Page */
        .create-article-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .create-article-card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }

        .create-article-card h2 {
            margin-bottom: 1.5rem;
            color: var(--accent-color);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .form-group-full {
            margin-bottom: 1rem;
        }

        .form-group-full label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .form-group-full textarea {
            width: 100%;
            padding: 0.8rem;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-radius: 4px;
            color: var(--text-color);
            resize: vertical;
            min-height: 200px;
        }

        .form-group-full textarea:focus {
            border-color: var(--accent-color);
        }

        .tags-input {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .tag {
            background-color: var(--secondary-bg);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tag-remove {
            cursor: pointer;
            color: var(--error-color);
        }

        .tag-input {
            flex: 1;
            min-width: 100px;
            padding: 0.3rem;
            background-color: transparent;
            border: none;
            color: var(--text-color);
        }

        .tag-input:focus {
            outline: none;
        }

        .publish-btn {
            background-color: var(--success-color);
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 4px;
            font-weight: 600;
            margin-top: 1rem;
        }

        .publish-btn:hover {
            background-color: #27ae60;
        }

        /* Image Upload Styles */
        .image-upload-container {
            margin-bottom: 1rem;
        }
        
        .image-upload-preview {
            width: 100%;
            height: 200px;
            background-color: var(--secondary-bg);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        .image-upload-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }
        
        .image-upload-placeholder {
            text-align: center;
            color: var(--text-secondary);
        }
        
        .image-upload-placeholder i {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }
        
        .image-upload-btn {
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 500;
            display: inline-block;
            cursor: pointer;
        }
        
        .image-upload-btn:hover {
            background-color: var(--hover-color);
        }
        
        .image-upload-input {
            display: none;
        }

        /* About Page */
        .about-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .writer-info {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .writer-photo {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--accent-color);
            flex-shrink: 0;
            background-size: cover;
            background-position: center;
        }

        .writer-details {
            flex: 1;
        }

        .writer-details h2 {
            margin-bottom: 1rem;
            color: var(--accent-color);
        }

        .writer-details p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        .social-links-about {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-link-about {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            transition: var(--transition);
        }

        .social-link-about:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
        }

        /* Articles Page */
        .search-bar {
            margin-bottom: 2rem;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 2.5rem;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-radius: 4px;
            color: var(--text-color);
        }

        .search-bar i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* Article Detail Page */
        .article-detail {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .article-header {
            margin-bottom: 1.5rem;
        }

        .article-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .article-meta-detail {
            display: flex;
            gap: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .article-image {
            width: 100%;
            height: 400px;
            background-color: #333;
            background-size: cover;
            background-position: center;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
        }

        .article-body {
            line-height: 1.8;
            margin-bottom: 2rem;
        }

        .article-body p {
            margin-bottom: 1rem;
        }

        .article-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .tag {
            background-color: var(--secondary-bg);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .article-actions-detail {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #333;
        }

        .rating-detail {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .rating-stars {
            display: flex;
            gap: 5px;
        }

        .rating-count {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Share buttons in article detail */
        .share-buttons {
            display: flex;
            gap: 10px;
        }
        
        .share-btn, .copy-link-btn {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .share-btn:hover, .copy-link-btn:hover {
            background-color: var(--accent-color);
            color: var(--primary-bg);
        }

        .comments-section {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
        }

        .comments-title {
            margin-bottom: 1.5rem;
            color: var(--accent-color);
        }

        .comment-form {
            margin-bottom: 2rem;
        }

        .comment-input {
            width: 100%;
            padding: 1rem;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-radius: 4px;
            color: var(--text-color);
            margin-bottom: 1rem;
            resize: vertical;
            min-height: 100px;
        }

        .comment-submit {
            background-color: var(--accent-color);
            color: var(--primary-bg);
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .comment-submit:hover {
            background-color: var(--hover-color);
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .comment {
            padding: 1rem;
            background-color: var(--secondary-bg);
            border-radius: var(--border-radius);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .comment-author {
            font-weight: 600;
            color: var(--accent-color);
        }

        .comment-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .comment-text {
            color: var(--text-color);
        }

        /* Profile Page */
        .profile-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: var(--card-shadow);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            background-size: cover;
            background-position: center;
            position: relative;
            border: 3px solid var(--accent-color);
        }

        .profile-avatar-upload {
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: var(--accent-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .profile-details h2 {
            margin-bottom: 0.5rem;
        }

        .profile-details p {
            color: var(--text-secondary);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat {
            text-align: center;
            padding: 1rem;
            background-color: var(--secondary-bg);
            border-radius: var(--border-radius);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .profile-bio {
            margin-bottom: 2rem;
            padding: 1rem;
            background-color: var(--secondary-bg);
            border-radius: var(--border-radius);
        }

        .profile-bio h3 {
            margin-bottom: 0.5rem;
            color: var(--accent-color);
        }

        .profile-articles {
            margin-top: 2rem;
        }

        .profile-articles h3 {
            margin-bottom: 1rem;
            color: var(--accent-color);
        }

        /* Settings Page */
        .settings-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: var(--card-shadow);
        }

        .settings-group {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #333;
        }

        .settings-group h3 {
            margin-bottom: 1.5rem;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-group h3 i {
            font-size: 1.2rem;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-item-label {
            flex: 1;
        }

        .setting-item-label h4 {
            margin-bottom: 0.3rem;
        }

        .setting-item-label p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: var(--transition);
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--accent-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .color-picker {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .color-option.active {
            border-color: white;
            transform: scale(1.1);
        }

        .font-option {
            padding: 8px 15px;
            border-radius: 4px;
            background-color: var(--secondary-bg);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .font-option.active {
            border-color: var(--accent-color);
            background-color: rgba(52, 152, 219, 0.1);
        }

        .font-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .layout-options {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .layout-option {
            flex: 1;
            padding: 15px;
            border-radius: var(--border-radius);
            background-color: var(--secondary-bg);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
            text-align: center;
        }

        .layout-option.active {
            border-color: var(--accent-color);
            background-color: rgba(52, 152, 219, 0.1);
        }

        .layout-option i {
            font-size: 1.5rem;
            margin-bottom: 10px;
            display: block;
        }

        .card-style-options {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .card-style-option {
            flex: 1;
            padding: 15px;
            border-radius: var(--border-radius);
            background-color: var(--secondary-bg);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
            text-align: center;
        }

        .card-style-option.active {
            border-color: var(--accent-color);
            background-color: rgba(52, 152, 219, 0.1);
        }

        .card-style-option i {
            font-size: 1.5rem;
            margin-bottom: 10px;
            display: block;
        }

        .logout-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #333;
        }

        .logout-btn-settings {
            background-color: var(--error-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .logout-btn-settings:hover {
            background-color: #c0392b;
        }

        .danger-zone {
            border: 1px solid var(--error-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .danger-zone h3 {
            color: var(--error-color);
            margin-bottom: 1rem;
        }

        .danger-zone p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .delete-account-btn {
            background-color: var(--error-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .delete-account-btn:hover {
            background-color: #c0392b;
        }

        .follow-btn {
            background-color: var(--accent-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .follow-btn:hover {
            background-color: var(--hover-color);
        }

        .follow-btn.following {
            background-color: var(--success-color);
        }

        .user-actions {
            display: flex;
            margin-top: 1rem;
            gap: 10px;
        }

        .suggestions-section {
            margin-top: 2rem;
        }

        .suggestions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .suggestion-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--card-shadow);
        }

        .suggestion-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 1rem;
            background-size: cover;
            background-position: center;
            border: 2px solid var(--accent-color);
        }

        .suggestion-stats {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .engagement-metrics {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 0.5rem 0;
            border-top: 1px solid #333;
            border-bottom: 1px solid #333;
        }

        .metric {
            text-align: center;
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-color);
        }

        .metric-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .comment-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .comment-stars {
            display: flex;
            gap: 2px;
        }

        .comment-star {
            color: var(--warning-color);
            font-size: 0.9rem;
        }

        .profile-picture-upload {
            display: none;
        }

        /* Footer Styles */
        footer {
            background-color: var(--secondary-bg);
            padding: 2rem 0;
            margin-top: 2rem;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .social-links {
            display: flex;
            gap: 1.5rem;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            transition: var(--transition);
        }

        .social-link:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
        }

        .copyright {
            color: var(--text-secondary);
            text-align: center;
        }

        /* Share Modal Styles */
        .share-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .share-modal.active {
            display: flex;
        }
        
        .share-modal-content {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .share-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .share-modal-title {
            color: var(--accent-color);
            font-size: 1.5rem;
        }
        
        .share-modal-close {
            background: none;
            color: var(--text-color);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .share-link-container {
            display: flex;
            margin-bottom: 1.5rem;
        }
        
        .share-link-input {
            flex: 1;
            padding: 0.8rem;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-radius: 4px 0 0 4px;
            color: var(--text-color);
        }
        
        .share-copy-btn {
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }
        
        .share-copy-btn:hover {
            background-color: var(--hover-color);
        }
        
        .share-platforms {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .share-platform {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .share-platform:hover {
            transform: translateY(-3px);
        }
        
        .share-facebook {
            background-color: #3b5998;
        }
        
        .share-twitter {
            background-color: #1da1f2;
        }
        
        .share-linkedin {
            background-color: #0077b5;
        }
        
        .share-whatsapp {
            background-color: #25d366;
        }
        
        .share-email {
            background-color: #ea4335;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .toast.active {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast.error {
            background-color: var(--error-color);
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .slide-up {
            animation: slideUp 0.5s ease;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Enhanced Editor Styles */
        .editor-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            padding: 10px;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-bottom: none;
            border-radius: 4px 4px 0 0;
        }
        
        .toolbar-group {
            display: flex;
            gap: 5px;
            padding-right: 10px;
            border-right: 1px solid #333;
        }
        
        .toolbar-group:last-child {
            border-right: none;
        }
        
        .toolbar-btn {
            background-color: transparent;
            color: var(--text-color);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .toolbar-btn:hover {
            background-color: rgba(52, 152, 219, 0.2);
        }
        
        .toolbar-btn.active {
            background-color: var(--accent-color);
            color: var(--primary-bg);
        }
        
        .toolbar-select {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            border: 1px solid #333;
            border-radius: 4px;
            padding: 5px;
            height: 36px;
        }
        
        .editor-content {
            min-height: 400px;
            padding: 15px;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-top: none;
            border-radius: 0 0 4px 4px;
            color: var(--text-color);
            line-height: 1.6;
            overflow-y: auto;
            outline: none;
        }
        
        .editor-content:focus {
            border-color: var(--accent-color);
        }
        
        .editor-content h1, .editor-content h2, .editor-content h3, 
        .editor-content h4, .editor-content h5, .editor-content h6 {
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            color: var(--accent-color);
        }
        
        .editor-content p {
            margin-bottom: 1rem;
        }
        
        .editor-content ul, .editor-content ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }
        
        .editor-content blockquote {
            border-left: 4px solid var(--accent-color);
            padding-left: 1rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: var(--text-secondary);
        }
        
        .editor-content pre {
            background-color: var(--primary-bg);
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        
        .editor-content code {
            background-color: var(--primary-bg);
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        .editor-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }
        
        .editor-content table, .editor-content th, .editor-content td {
            border: 1px solid #333;
        }
        
        .editor-content th, .editor-content td {
            padding: 8px 12px;
            text-align: left;
        }
        
        .editor-content th {
            background-color: var(--card-bg);
        }
        
        .editor-content img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin: 1rem 0;
        }
        
        .editor-content a {
            color: var(--accent-color);
            text-decoration: underline;
        }
        
        .editor-placeholder {
            color: var(--text-secondary);
            position: absolute;
            top: 15px;
            left: 15px;
            pointer-events: none;
        }
        
        .editor-status {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-top: none;
            border-radius: 0 0 4px 4px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .word-count {
            display: flex;
            gap: 10px;
        }
        
        .editor-container {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .editor-actions {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }
        
        .save-draft-btn {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            border: 1px solid #333;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .save-draft-btn:hover {
            background-color: rgba(52, 152, 219, 0.1);
            border-color: var(--accent-color);
        }
        
        .preview-btn {
            background-color: var(--warning-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .preview-btn:hover {
            background-color: #e67e22;
        }
        
        .publish-options {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .publish-options h3 {
            margin-bottom: 1rem;
            color: var(--accent-color);
        }
        
        .visibility-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .visibility-option {
            flex: 1;
            text-align: center;
            padding: 1rem;
            border: 1px solid #333;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .visibility-option.active {
            border-color: var(--accent-color);
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .visibility-option i {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .schedule-publish {
            margin-top: 1.5rem;
        }
        
        .schedule-input {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
        }
        
        .schedule-input input {
            flex: 1;
            padding: 0.8rem;
            background-color: var(--secondary-bg);
            border: 1px solid #333;
            border-radius: 4px;
            color: var(--text-color);
        }
        
        /* Modal Styles for Preview */
        .preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .preview-modal.active {
            display: flex;
        }
        
        .preview-content {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
        }
        
        .preview-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            color: var(--text-color);
            font-size: 1.5rem;
            cursor: pointer;
            border: none;
        }
        
        .preview-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--accent-color);
        }
        
        .preview-meta {
            display: flex;
            gap: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        
        .preview-body {
            line-height: 1.8;
        }
        
        .preview-body img {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            margin: 1rem 0;
        }
        
        /* Responsive adjustments for editor */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            nav ul {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .writer-info {
                flex-direction: column;
                text-align: center;
            }

            .writer-photo {
                width: 150px;
                height: 150px;
                font-size: 3rem;
            }

            .hero h2 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }

            .profile-stats {
                grid-template-columns: 1fr;
            }

            .suggestions-grid {
                grid-template-columns: 1fr;
            }

            .user-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .follow-btn {
                width: 100%;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .layout-options, .card-style-options {
                flex-direction: column;
            }

            .font-options {
                justify-content: center;
            }

            .color-picker {
                justify-content: center;
            }

            .article-detail {
                padding: 1rem;
            }

            .article-title {
                font-size: 1.5rem;
            }

            .article-image {
                height: 200px;
            }

            .article-actions-detail {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .rating-detail {
                width: 100%;
                justify-content: space-between;
            }

            .comments-section {
                padding: 1rem;
            }

            .settings-card {
                padding: 1rem;
            }

            .setting-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .toggle-switch {
                align-self: flex-end;
            }
            
            .share-modal-content {
                padding: 1.5rem;
            }
            
            .share-link-container {
                flex-direction: column;
            }
            
            .share-link-input {
                border-radius: 4px;
                margin-bottom: 0.5rem;
            }
            
            .share-copy-btn {
                border-radius: 4px;
            }
            
            .editor-toolbar {
                gap: 3px;
            }
            
            .toolbar-group {
                padding-right: 5px;
            }
            
            .toolbar-btn {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            
            .visibility-options {
                flex-direction: column;
            }
            
            .schedule-input {
                flex-direction: column;
            }
            
            .editor-actions {
                flex-direction: column;
            }
            
            .preview-content {
                padding: 1rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                width: 95%;
            }

            .hero {
                padding: 2rem 1rem;
            }

            .categories {
                justify-content: center;
            }

            .articles-grid {
                grid-template-columns: 1fr;
            }

            .auth-card {
                padding: 1.5rem;
            }

            .social-buttons {
                flex-direction: column;
            }

            .profile-card {
                padding: 1rem;
            }

            .create-article-card {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <img src="image/logo.jpg" alt="BlogHub Logo" class="logo-img" width="20" height="20">
                <h1>BlogHub</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-page="about">About Us</a></li>
                    <li><a href="#" class="nav-link" data-page="articles">Articles</a></li>
                    <li><a href="#" class="nav-link" data-page="create-article">Write</a></li>
                    <li><a href="#" class="nav-link" data-page="profile">Profile</a></li>
                    <li><a href="#" class="nav-link" data-page="settings">Settings</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="user-info" id="userInfo">
                <button class="create-article-btn" id="createArticleBtn">Write</button>
                <div class="user-avatar" id="userAvatar">U</div>
                <button class="logout-btn" id="logoutBtn">Logout</button>
            </div>
        </div>
        <div class="mobile-nav" id="mobileNav">
            <ul>
                <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                <li><a href="#" class="nav-link" data-page="about">About Us</a></li>
                <li><a href="#" class="nav-link" data-page="articles">Articles</a></li>
                <li><a href="#" class="nav-link" data-page="create-article">Write</a></li>
                <li><a href="#" class="nav-link" data-page="profile">Profile</a></li>
                <li><a href="#" class="nav-link" data-page="settings">Settings</a></li>
            </ul>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Login/Signup Page -->
        <section id="auth" class="page active">
            <div class="container auth-container">
                <div class="auth-card">
                    <h2>Welcome to BlogHub</h2>
                    <div class="auth-tabs">
                        <button class="auth-tab active" data-tab="login">Login</button>
                        <button class="auth-tab" data-tab="signup">Sign Up</button>
                    </div>
                    
                    <form id="loginForm" class="auth-form active">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" placeholder="Enter your password">
                        </div>
                        <button type="submit" class="auth-btn">Login</button>
                    </form>
                    
                    <form id="signupForm" class="auth-form">
                        <div class="form-group">
                            <label for="signupName">Full Name</label>
                            <input type="text" id="signupName" placeholder="Enter your full name">
                        </div>
                        <div class="form-group">
                            <label for="signupEmail">Email</label>
                            <input type="email" id="signupEmail" placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <input type="password" id="signupPassword" placeholder="Create a password">
                        </div>
                        <div class="form-group">
                            <label for="signupBio">Bio (Optional)</label>
                            <textarea id="signupBio" placeholder="Tell us about yourself" rows="3"></textarea>
                        </div>
                        <button type="submit" class="auth-btn">Sign Up</button>
                    </form>
                    
                    <div class="social-login">
                        <p>Or continue with</p>
                        <div class="social-buttons">
                            <button class="social-btn google-btn" id="googleLogin">
                                <i class="fab fa-google"></i> Google
                            </button>
                            <button class="social-btn facebook-btn" id="facebookLogin">
                                <i class="fab fa-facebook-f"></i> Facebook
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Home Page -->
        <section id="home" class="page">
            <div class="container">
                <div class="hero">
                    <h2>Share Your Stories with the World</h2>
                    <p>BlogHub is your platform to express ideas, share experiences, and connect with like-minded readers and writers.</p>
                    <a href="#" class="cta-btn nav-link" data-page="articles">Explore Articles</a>
                </div>
                
                <div class="quote-of-day">
                    <p class="quote-content">"The only way to do great work is to love what you do."</p>
                    <p class="quote-author">- Steve Jobs</p>
                </div>
                
                <h2 class="section-title">Categories</h2>
                <div class="categories">
                    <div class="category">Technology</div>
                    <div class="category">Lifestyle</div>
                    <div class="category">Travel</div>
                    <div class="category">Food</div>
                    <div class="category">Health</div>
                    <div class="category">Business</div>
                    <div class="category">Entertainment</div>
                    <div class="category">Science</div>
                </div>
                
                <h2 class="section-title">Featured Articles</h2>
                <div class="articles-grid" id="featuredArticles">
                    <!-- Featured articles will be dynamically loaded here -->
                </div>

                <!-- User Suggestions for First-Time Users -->
                <div class="suggestions-section" id="suggestionsSection" style="display: none;">
                    <h2 class="section-title">People You May Know</h2>
                    <p>Connect with other writers and readers to expand your network.</p>
                    <div class="suggestions-grid" id="suggestionsGrid">
                        <!-- User suggestions will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Create Article Page - Enhanced with Rich Text Editor -->
        <section id="create-article" class="page">
            <div class="container create-article-container">
                <div class="create-article-card">
                    <h2>Create New Article</h2>
                    <form id="createArticleForm">
                        <div class="form-group">
                            <label for="articleTitle">Title</label>
                            <input type="text" id="articleTitle" placeholder="Enter article title">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="articleCategory">Category</label>
                                <select id="articleCategory">
                                    <option value="">Select Category</option>
                                    <option value="Technology">Technology</option>
                                    <option value="Lifestyle">Lifestyle</option>
                                    <option value="Travel">Travel</option>
                                    <option value="Food">Food</option>
                                    <option value="Health">Health</option>
                                    <option value="Business">Business</option>
                                    <option value="Entertainment">Entertainment</option>
                                    <option value="Science">Science</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Featured Image</label>
                                <div class="image-upload-container">
                                    <div class="image-upload-preview" id="imagePreview">
                                        <div class="image-upload-placeholder">
                                            <i class="fas fa-image"></i>
                                            <p>No image selected</p>
                                        </div>
                                    </div>
                                    <label for="articleImageUpload" class="image-upload-btn">
                                        <i class="fas fa-upload"></i> Upload Image
                                    </label>
                                    <input type="file" id="articleImageUpload" class="image-upload-input" accept="image/*">
                                    <input type="hidden" id="articleImage" value="">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="articleExcerpt">Excerpt</label>
                            <textarea id="articleExcerpt" placeholder="Brief description of your article" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group-full">
                            <label for="articleContent">Content</label>
                            <div class="editor-container">
                                <div class="editor-toolbar" id="editorToolbar">
                                    <div class="toolbar-group">
                                        <button type="button" class="toolbar-btn" data-command="bold" title="Bold">
                                            <i class="fas fa-bold"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="italic" title="Italic">
                                            <i class="fas fa-italic"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="underline" title="Underline">
                                            <i class="fas fa-underline"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-group">
                                        <button type="button" class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">
                                            <i class="fas fa-list-ul"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">
                                            <i class="fas fa-list-ol"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-group">
                                        <button type="button" class="toolbar-btn" data-command="justifyLeft" title="Align Left">
                                            <i class="fas fa-align-left"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="justifyCenter" title="Align Center">
                                            <i class="fas fa-align-center"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="justifyRight" title="Align Right">
                                            <i class="fas fa-align-right"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="justifyFull" title="Justify">
                                            <i class="fas fa-align-justify"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-group">
                                        <button type="button" class="toolbar-btn" data-command="createLink" title="Insert Link">
                                            <i class="fas fa-link"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="unlink" title="Remove Link">
                                            <i class="fas fa-unlink"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-group">
                                        <button type="button" class="toolbar-btn" data-command="formatBlock" data-value="blockquote" title="Blockquote">
                                            <i class="fas fa-quote-right"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="insertHorizontalRule" title="Horizontal Line">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-group">
                                        <select class="toolbar-select" id="formatSelect" title="Text Format">
                                            <option value="p">Paragraph</option>
                                            <option value="h1">Heading 1</option>
                                            <option value="h2">Heading 2</option>
                                            <option value="h3">Heading 3</option>
                                            <option value="h4">Heading 4</option>
                                            <option value="h5">Heading 5</option>
                                            <option value="h6">Heading 6</option>
                                            <option value="pre">Code</option>
                                        </select>
                                    </div>
                                    
                                    <div class="toolbar-group">
                                        <button type="button" class="toolbar-btn" id="insertImageBtn" title="Insert Image">
                                            <i class="fas fa-image"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" id="insertTableBtn" title="Insert Table">
                                            <i class="fas fa-table"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-group">
                                        <button type="button" class="toolbar-btn" data-command="undo" title="Undo">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                        <button type="button" class="toolbar-btn" data-command="redo" title="Redo">
                                            <i class="fas fa-redo"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="editor-content" id="articleContent" contenteditable="true">
                                    <div class="editor-placeholder" id="editorPlaceholder">Start writing your article here...</div>
                                </div>
                                
                                <div class="editor-status">
                                    <div class="word-count">
                                        <span id="wordCount">0 words</span>
                                        <span id="charCount">0 characters</span>
                                    </div>
                                    <div class="editor-mode">
                                        <span id="editorMode">Visual</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="articleTags">Tags</label>
                            <div class="tags-input" id="tagsContainer">
                                <input type="text" id="articleTags" class="tag-input" placeholder="Add tags...">
                            </div>
                            <div id="tagsList" class="tags-input"></div>
                        </div>
                        
                        <!-- Publish Options -->
                        <div class="publish-options">
                            <h3>Publishing Options</h3>
                            
                            <div class="visibility-options">
                                <div class="visibility-option active" data-visibility="public">
                                    <i class="fas fa-globe"></i>
                                    <span>Public</span>
                                    <small>Visible to everyone</small>
                                </div>
                                <div class="visibility-option" data-visibility="private">
                                    <i class="fas fa-lock"></i>
                                    <span>Private</span>
                                    <small>Only visible to you</small>
                                </div>
                                <div class="visibility-option" data-visibility="draft">
                                    <i class="fas fa-file-alt"></i>
                                    <span>Draft</span>
                                    <small>Save as draft</small>
                                </div>
                            </div>
                            
                            <div class="schedule-publish">
                                <label>
                                    <input type="checkbox" id="schedulePublish">
                                    Schedule Publication
                                </label>
                                <div class="schedule-input" id="scheduleInput" style="display: none;">
                                    <input type="datetime-local" id="publishDate">
                                    <button type="button" class="save-draft-btn" id="clearScheduleBtn">Clear</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="editor-actions">
                            <button type="button" class="save-draft-btn" id="saveDraftBtn">Save Draft</button>
                            <button type="button" class="preview-btn" id="previewBtn">Preview</button>
                            <button type="submit" class="publish-btn">Publish Article</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Preview Modal -->
        <div class="preview-modal" id="previewModal">
            <div class="preview-content">
                <button class="preview-close" id="previewClose">&times;</button>
                <h1 class="preview-title" id="previewTitle">Article Title</h1>
                <div class="preview-meta">
                    <span id="previewAuthor">Author Name</span>
                    <span id="previewDate">Publish Date</span>
                    <span id="previewCategory">Category</span>
                </div>
                <div class="preview-image" id="previewImage" style="height: 300px; background-color: #333; background-size: cover; background-position: center; border-radius: var(--border-radius); margin-bottom: 1.5rem;"></div>
                <div class="preview-body" id="previewBody">
                    <!-- Preview content will be inserted here -->
                </div>
            </div>
        </div>

        <!-- About Us Page -->
        <section id="about" class="page">
            <div class="container">
                <h2 class="section-title">About Us</h2>
                <div class="about-content">
                    <div class="writer-info">
                        <div class="writer-photo">
                            <img src="image/rabi.jpg" alt="Science image" width="250" height="250">
                        </div>
                        <div class="writer-details">
                            <h2>Rabi</h2>
                            <p>Rabi is a passionate writer and content creator with over 1 years of experience in the blogging industry. With a background in UI/Ux design, graphics design, coding, and digital marketing, Rabi brings a unique perspective to every piece of content.</p>
                            <p>When not writing, Rabi enjoys photography, hiking, and exploring new coffee shops around the city. The goal is to create a community where ideas can be shared freely and creativity can flourish.</p>
                            <p>Through BlogHub, Rabi hopes to inspire others to share their stories and connect with a global audience of readers and writers.</p>
                            
                            <div class="social-links-about">
                                <a href="#" class="social-link-about">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="social-link-about">
                                    <i class="fab fa-linkedin-in"></i>
                                </a>
                                <a href="#" class="social-link-about">
                                    <i class="fab fa-instagram"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Articles Page -->
        <section id="articles" class="page">
            <div class="container">
                <h2 class="section-title">All Articles</h2>
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search articles...">
                </div>
                <div class="articles-grid" id="allArticles">
                    <!-- All articles will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <!-- Article Detail Page - Updated with share buttons -->
        <section id="article-detail" class="page">
            <div class="container">
                <div class="article-detail">
                    <div class="article-header">
                        <h1 class="article-title" id="detailTitle">Article Title</h1>
                        <div class="article-meta-detail">
                            <span id="detailAuthor">Author Name</span>
                            <span id="detailDate">May 15, 2023</span>
                            <span id="detailCategory">Technology</span>
                        </div>
                        <div class="engagement-metrics">
                            <div class="metric">
                                <div class="metric-value" id="detailReadCount">0</div>
                                <div class="metric-label">Reads</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value" id="detailLikeCount">0</div>
                                <div class="metric-label">Likes</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value" id="detailCommentCount">0</div>
                                <div class="metric-label">Comments</div>
                            </div>
                        </div>
                    </div>
                    <div class="article-image" id="detailImage"></div>
                    <div class="article-body" id="detailBody">
                        <!-- Article content will be dynamically loaded here -->
                    </div>
                    <div class="article-tags" id="detailTags">
                        <!-- Tags will be dynamically loaded here -->
                    </div>
                    <div class="article-actions-detail">
                        <div class="rating-detail">
                            <div class="rating-stars" id="detailRating">
                                <!-- Rating stars will be dynamically loaded here -->
                            </div>
                            <div class="rating-count" id="detailRatingCount">(0 ratings)</div>
                        </div>
                        <div class="share-buttons">
                            <button class="share-btn" id="shareArticleBtn"><i class="fas fa-share-alt"></i> Share</button>
                            <button class="copy-link-btn" id="copyArticleLinkBtn"><i class="fas fa-link"></i> Copy Link</button>
                            <button class="like-btn" id="likeBtn"><i class="far fa-heart"></i> Like</button>
                        </div>
                    </div>
                </div>
                
                <div class="comments-section">
                    <h3 class="comments-title">Comments</h3>
                    <div class="comment-form">
                        <textarea class="comment-input" id="commentInput" placeholder="Add your comment..."></textarea>
                        <div class="comment-rating">
                            <span>Rate this article:</span>
                            <div class="comment-stars" id="commentRating">
                                <i class="far fa-star comment-star" data-rating="1"></i>
                                <i class="far fa-star comment-star" data-rating="2"></i>
                                <i class="far fa-star comment-star" data-rating="3"></i>
                                <i class="far fa-star comment-star" data-rating="4"></i>
                                <i class="far fa-star comment-star" data-rating="5"></i>
                            </div>
                        </div>
                        <button class="comment-submit" id="commentSubmit">Post Comment</button>
                    </div>
                    <div class="comments-list" id="commentsList">
                        <!-- Comments will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Page -->
        <section id="profile" class="page">
            <div class="container">
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar" id="profileAvatar">
                            U
                            <div class="profile-avatar-upload" id="profileAvatarUpload">
                                <i class="fas fa-camera"></i>
                            </div>
                            <input type="file" id="profilePictureUpload" class="profile-picture-upload" accept="image/*">
                        </div>
                        <div class="profile-details">
                            <h2 id="profileName">User Name</h2>
                            <p id="profileEmail">user@example.com</p>
                            <p id="profileJoinDate">Member since January 2023</p>
                            <div class="user-actions">
                                <button class="follow-btn" id="profileFollowBtn">Follow</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-bio">
                        <h3>About Me</h3>
                        <p id="profileBio">This is where the user's bio will appear. They can edit this in their settings.</p>
                    </div>
                    
                    <div class="profile-stats">
                        <div class="stat">
                            <div class="stat-value" id="profileArticlesCount">12</div>
                            <div class="stat-label">Articles</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="profileFollowersCount">356</div>
                            <div class="stat-label">Followers</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="profileFollowingCount">124</div>
                            <div class="stat-label">Following</div>
                        </div>
                    </div>
                    
                    <div class="profile-articles">
                        <h3>My Articles</h3>
                        <div class="articles-grid" id="profileArticles">
                            <!-- User's articles will be dynamically loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Page -->
        <section id="settings" class="page">
            <div class="container">
                <div class="settings-card">
                    <h2 class="section-title">Settings</h2>
                    
                    <!-- Account Settings -->
                    <div class="settings-group">
                        <h3><i class="fas fa-user-cog"></i> Account Settings</h3>
                        
                        <div class="form-group">
                            <label for="settingsProfilePicture">Profile Picture</label>
                            <input type="file" id="settingsProfilePicture" accept="image/*">
                        </div>
                        
                        <div class="form-group">
                            <label for="settingsName">Display Name</label>
                            <input type="text" id="settingsName" placeholder="Enter your display name">
                        </div>
                        
                        <div class="form-group">
                            <label for="settingsBio">Bio/Description</label>
                            <textarea id="settingsBio" placeholder="Tell us about yourself" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="settingsEmail">Email Address</label>
                            <input type="email" id="settingsEmail" placeholder="Enter your email">
                        </div>
                        
                        <div class="form-group">
                            <label for="settingsCurrentPassword">Current Password</label>
                            <input type="password" id="settingsCurrentPassword" placeholder="Enter current password">
                        </div>
                        
                        <div class="form-group">
                            <label for="settingsNewPassword">New Password</label>
                            <input type="password" id="settingsNewPassword" placeholder="Enter new password">
                        </div>
                        
                        <div class="form-group">
                            <label for="settingsConfirmPassword">Confirm New Password</label>
                            <input type="password" id="settingsConfirmPassword" placeholder="Confirm new password">
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Two-Factor Authentication</h4>
                                <p>Add an extra layer of security to your account</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="twoFactorToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Blog Preferences -->
                    <div class="settings-group">
                        <h3><i class="fas fa-blog"></i> Blog Preferences</h3>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Default Blog Visibility</h4>
                                <p>Set the default visibility for new blog posts</p>
                            </div>
                            <select id="blogVisibility">
                                <option value="public">Public</option>
                                <option value="private">Private</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Allow Comments</h4>
                                <p>Enable or disable comments on your posts</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="commentsToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Auto Save Drafts</h4>
                                <p>Automatically save drafts while writing</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoSaveToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Post Sorting</h4>
                                <p>Default view for your posts</p>
                            </div>
                            <select id="postSorting">
                                <option value="latest">Latest</option>
                                <option value="most-viewed">Most Viewed</option>
                                <option value="trending">Trending</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Reading Time Display</h4>
                                <p>Show estimated read time on posts</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="readingTimeToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Show Author Info</h4>
                                <p>Display author card at the end of posts</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="authorInfoToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Enable Sharing Buttons</h4>
                                <p>Show social sharing options on posts</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="sharingToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Appearance Settings -->
                    <div class="settings-group">
                        <h3><i class="fas fa-palette"></i> Appearance Settings</h3>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Theme Mode</h4>
                                <p>Choose your preferred theme</p>
                            </div>
                            <select id="themeMode">
                                <option value="dark">Dark</option>
                                <option value="light">Light</option>
                                <option value="system">System Default</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Accent Color</h4>
                                <p>Choose your primary highlight color</p>
                            </div>
                            <div class="color-picker">
                                <div class="color-option active" style="background-color: #3498db;" data-color="#3498db"></div>
                                <div class="color-option" style="background-color: #e74c3c;" data-color="#e74c3c"></div>
                                <div class="color-option" style="background-color: #2ecc71;" data-color="#2ecc71"></div>
                                <div class="color-option" style="background-color: #f39c12;" data-color="#f39c12"></div>
                                <div class="color-option" style="background-color: #9b59b6;" data-color="#9b59b6"></div>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Font Style</h4>
                                <p>Select your preferred font family</p>
                            </div>
                            <div class="font-options">
                                <div class="font-option active" data-font="Segoe UI, Tahoma, Geneva, Verdana, sans-serif">Default</div>
                                <div class="font-option" data-font="Arial, Helvetica, sans-serif">Arial</div>
                                <div class="font-option" data-font="Georgia, serif">Georgia</div>
                                <div class="font-option" data-font="'Courier New', Courier, monospace">Courier</div>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Layout Mode</h4>
                                <p>Choose your preferred layout style</p>
                            </div>
                            <div class="layout-options">
                                <div class="layout-option active" data-layout="full-width">
                                    <i class="fas fa-arrows-alt-h"></i>
                                    <span>Full Width</span>
                                </div>
                                <div class="layout-option" data-layout="boxed">
                                    <i class="fas fa-square"></i>
                                    <span>Boxed</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Blog Card Style</h4>
                                <p>Choose how your blog cards appear</p>
                            </div>
                            <div class="card-style-options">
                                <div class="card-style-option active" data-style="minimal">
                                    <i class="fas fa-th-large"></i>
                                    <span>Minimal</span>
                                </div>
                                <div class="card-style-option" data-style="bordered">
                                    <i class="fas fa-square"></i>
                                    <span>Bordered</span>
                                </div>
                                <div class="card-style-option" data-style="image-focused">
                                    <i class="fas fa-image"></i>
                                    <span>Image Focused</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notification Settings -->
                    <div class="settings-group">
                        <h3><i class="fas fa-bell"></i> Notification Settings</h3>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>New Follower Notification</h4>
                                <p>Get notified when someone follows you</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="followerNotificationToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>New Comment Alert</h4>
                                <p>Receive alerts for new comments on your posts</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="commentNotificationToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Blog Published Notification</h4>
                                <p>Get notified when your blog is published</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="publishNotificationToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Weekly Analytics Report</h4>
                                <p>Receive engagement summary by email</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="analyticsReportToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Sound/Vibration Alert</h4>
                                <p>Enable or mute notification sound</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="soundAlertToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Social & Connection Settings -->
                    <div class="settings-group">
                        <h3><i class="fas fa-share-alt"></i> Social & Connection Settings</h3>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Followers Visibility</h4>
                                <p>Control who can see your follower count</p>
                            </div>
                            <select id="followersVisibility">
                                <option value="public">Show to Everyone</option>
                                <option value="followers">Show to Followers Only</option>
                                <option value="private">Hide from Everyone</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Allow Messages</h4>
                                <p>Enable direct messages from other users</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="messagesToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Connect Social Accounts</h4>
                                <p>Link your social media accounts</p>
                            </div>
                            <div class="social-buttons">
                                <button class="social-btn google-btn">
                                    <i class="fab fa-google"></i> Connect Google
                                </button>
                                <button class="social-btn facebook-btn">
                                    <i class="fab fa-facebook-f"></i> Connect Facebook
                                </button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Auto-Share New Blogs</h4>
                                <p>Automatically post new blogs to connected accounts</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoShareToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Privacy Settings -->
                    <div class="settings-group">
                        <h3><i class="fas fa-lock"></i> Privacy Settings</h3>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Profile Visibility</h4>
                                <p>Control who can see your profile</p>
                            </div>
                            <select id="profileVisibility">
                                <option value="public">Public</option>
                                <option value="followers">Only Followers</option>
                                <option value="private">Private</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Who Can Comment</h4>
                                <p>Control who can comment on your posts</p>
                            </div>
                            <select id="commentPermissions">
                                <option value="everyone">Everyone</option>
                                <option value="followers">Followers Only</option>
                                <option value="no-one">No One</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Show Online Status</h4>
                                <p>Allow others to see when you're online</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="onlineStatusToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Blocked Users</h4>
                                <p>View and manage blocked accounts</p>
                            </div>
                            <button class="auth-btn" id="manageBlockedUsersBtn">Manage Blocked Users</button>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-item-label">
                                <h4>Download My Data</h4>
                                <p>Export all your data from BlogHub</p>
                            </div>
                            <button class="auth-btn" id="downloadDataBtn">Request Data Export</button>
                        </div>
                    </div>
                    
                    <!-- Danger Zone -->
                    <div class="danger-zone">
                        <h3><i class="fas fa-exclamation-triangle"></i> Danger Zone</h3>
                        <p>Once you delete your account, there is no going back. Please be certain.</p>
                        <button class="delete-account-btn" id="deleteAccountBtn">Delete Account</button>
                    </div>
                    
                    <button class="auth-btn" id="saveProfileBtn">Save Changes</button>
                    
                    <div class="logout-section">
                        <button class="logout-btn-settings" id="logoutBtnSettings">Logout</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="social-links">
                <a href="https://www.instagram.com/bloghub7/" class="social-link">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.facebook.com/profile.php?id=61573912779133" class="social-link">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.youtube.com/@Why-o2j" class="social-link" target="_blank">
                    <i class="fab fa-youtube"></i>
                </a>
            </div>
            <div class="copyright">
                <p>&copy; 2023 BlogHub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Share Modal -->
    <div class="share-modal" id="shareModal">
        <div class="share-modal-content">
            <div class="share-modal-header">
                <h3 class="share-modal-title">Share Article</h3>
                <button class="share-modal-close" id="shareModalClose">&times;</button>
            </div>
            <div class="share-link-container">
                <input type="text" class="share-link-input" id="shareLinkInput" readonly>
                <button class="share-copy-btn" id="shareCopyBtn">Copy</button>
            </div>
            <div class="share-platforms">
                <div class="share-platform share-facebook" data-platform="facebook">
                    <i class="fab fa-facebook-f"></i>
                </div>
                <div class="share-platform share-twitter" data-platform="twitter">
                    <i class="fab fa-twitter"></i>
                </div>
                <div class="share-platform share-linkedin" data-platform="linkedin">
                    <i class="fab fa-linkedin-in"></i>
                </div>
                <div class="share-platform share-whatsapp" data-platform="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                </div>
                <div class="share-platform share-email" data-platform="email">
                    <i class="fas fa-envelope"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script type="module">
        // Import Firebase v11 Modular SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
        import { 
            getAuth, 
            signInWithEmailAndPassword, 
            createUserWithEmailAndPassword,
            signInWithPopup,
            GoogleAuthProvider,
            FacebookAuthProvider,
            onAuthStateChanged,
            signOut,
            updateProfile,
            updatePassword,
            EmailAuthProvider,
            reauthenticateWithCredential,
            deleteUser
        } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";
        import { 
            getFirestore, 
            collection, 
            doc, 
            setDoc, 
            getDoc, 
            updateDoc,
            addDoc,
            query,
            where,
            getDocs,
            onSnapshot,
            orderBy,
            serverTimestamp,
            deleteDoc,
            increment,
            arrayUnion,
            arrayRemove
        } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";
        import { 
            getStorage,
            ref,
            uploadBytes,
            getDownloadURL
        } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-storage.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB5o_yjIq0_CNLYwsCtDTWRs0cIKhI8tlI",
            authDomain: "bloghub-cbcc4.firebaseapp.com",
            projectId: "bloghub-cbcc4",
            storageBucket: "bloghub-cbcc4.firebasestorage.app",
            messagingSenderId: "103514268951",
            appId: "1:103514268951:web:12ecf3c88e5672217e0352"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // DOM Elements
        const authPage = document.getElementById('auth');
        const homePage = document.getElementById('home');
        const aboutPage = document.getElementById('about');
        const articlesPage = document.getElementById('articles');
        const createArticlePage = document.getElementById('create-article');
        const articleDetailPage = document.getElementById('article-detail');
        const profilePage = document.getElementById('profile');
        const settingsPage = document.getElementById('settings');
        const userInfo = document.getElementById('userInfo');
        const userAvatar = document.getElementById('userAvatar');
        const profileAvatar = document.getElementById('profileAvatar');
        const profileAvatarUpload = document.getElementById('profileAvatarUpload');
        const profilePictureUpload = document.getElementById('profilePictureUpload');
        const settingsProfilePicture = document.getElementById('settingsProfilePicture');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const profileBio = document.getElementById('profileBio');
        const profileJoinDate = document.getElementById('profileJoinDate');
        const profileArticlesCount = document.getElementById('profileArticlesCount');
        const profileFollowersCount = document.getElementById('profileFollowersCount');
        const profileFollowingCount = document.getElementById('profileFollowingCount');
        const profileFollowBtn = document.getElementById('profileFollowBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const logoutBtnSettings = document.getElementById('logoutBtnSettings');
        const createArticleBtn = document.getElementById('createArticleBtn');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const createArticleForm = document.getElementById('createArticleForm');
        const googleLoginBtn = document.getElementById('googleLogin');
        const facebookLoginBtn = document.getElementById('facebookLogin');
        const navLinks = document.querySelectorAll('.nav-link');
        const featuredArticlesGrid = document.getElementById('featuredArticles');
        const allArticlesGrid = document.getElementById('allArticles');
        const profileArticlesGrid = document.getElementById('profileArticles');
        const searchInput = document.getElementById('searchInput');
        const saveProfileBtn = document.getElementById('saveProfileBtn');
        const settingsName = document.getElementById('settingsName');
        const settingsEmail = document.getElementById('settingsEmail');
        const settingsBio = document.getElementById('settingsBio');
        const settingsCurrentPassword = document.getElementById('settingsCurrentPassword');
        const settingsNewPassword = document.getElementById('settingsNewPassword');
        const settingsConfirmPassword = document.getElementById('settingsConfirmPassword');
        const twoFactorToggle = document.getElementById('twoFactorToggle');
        const suggestionsSection = document.getElementById('suggestionsSection');
        const suggestionsGrid = document.getElementById('suggestionsGrid');
        const likeBtn = document.getElementById('likeBtn');
        const commentInput = document.getElementById('commentInput');
        const commentRating = document.getElementById('commentRating');
        const commentSubmit = document.getElementById('commentSubmit');
        const detailReadCount = document.getElementById('detailReadCount');
        const detailLikeCount = document.getElementById('detailLikeCount');
        const detailCommentCount = document.getElementById('detailCommentCount');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileNav = document.getElementById('mobileNav');
        const articleTitle = document.getElementById('articleTitle');
        const articleCategory = document.getElementById('articleCategory');
        const articleImage = document.getElementById('articleImage');
        const articleExcerpt = document.getElementById('articleExcerpt');
        const articleContent = document.getElementById('articleContent');
        const articleTags = document.getElementById('articleTags');
        const tagsList = document.getElementById('tagsList');
        const deleteAccountBtn = document.getElementById('deleteAccountBtn');
        const downloadDataBtn = document.getElementById('downloadDataBtn');
        const manageBlockedUsersBtn = document.getElementById('manageBlockedUsersBtn');

        // New DOM Elements for Image Upload and Sharing
        const articleImageUpload = document.getElementById('articleImageUpload');
        const imagePreview = document.getElementById('imagePreview');
        const shareModal = document.getElementById('shareModal');
        const shareModalClose = document.getElementById('shareModalClose');
        const shareLinkInput = document.getElementById('shareLinkInput');
        const shareCopyBtn = document.getElementById('shareCopyBtn');
        const sharePlatforms = document.querySelectorAll('.share-platform');
        const shareArticleBtn = document.getElementById('shareArticleBtn');
        const copyArticleLinkBtn = document.getElementById('copyArticleLinkBtn');
        const toast = document.getElementById('toast');

        // Settings elements
        const blogVisibility = document.getElementById('blogVisibility');
        const commentsToggle = document.getElementById('commentsToggle');
        const autoSaveToggle = document.getElementById('autoSaveToggle');
        const postSorting = document.getElementById('postSorting');
        const readingTimeToggle = document.getElementById('readingTimeToggle');
        const authorInfoToggle = document.getElementById('authorInfoToggle');
        const sharingToggle = document.getElementById('sharingToggle');
        const themeMode = document.getElementById('themeMode');
        const colorOptions = document.querySelectorAll('.color-option');
        const fontOptions = document.querySelectorAll('.font-option');
        const layoutOptions = document.querySelectorAll('.layout-option');
        const cardStyleOptions = document.querySelectorAll('.card-style-option');
        const followerNotificationToggle = document.getElementById('followerNotificationToggle');
        const commentNotificationToggle = document.getElementById('commentNotificationToggle');
        const publishNotificationToggle = document.getElementById('publishNotificationToggle');
        const analyticsReportToggle = document.getElementById('analyticsReportToggle');
        const soundAlertToggle = document.getElementById('soundAlertToggle');
        const followersVisibility = document.getElementById('followersVisibility');
        const messagesToggle = document.getElementById('messagesToggle');
        const autoShareToggle = document.getElementById('autoShareToggle');
        const profileVisibility = document.getElementById('profileVisibility');
        const commentPermissions = document.getElementById('commentPermissions');
        const onlineStatusToggle = document.getElementById('onlineStatusToggle');

        // Enhanced Editor Elements
        const editorToolbar = document.getElementById('editorToolbar');
        const editorContent = document.getElementById('articleContent');
        const editorPlaceholder = document.getElementById('editorPlaceholder');
        const formatSelect = document.getElementById('formatSelect');
        const insertImageBtn = document.getElementById('insertImageBtn');
        const insertTableBtn = document.getElementById('insertTableBtn');
        const wordCount = document.getElementById('wordCount');
        const charCount = document.getElementById('charCount');
        const saveDraftBtn = document.getElementById('saveDraftBtn');
        const previewBtn = document.getElementById('previewBtn');
        const previewModal = document.getElementById('previewModal');
        const previewClose = document.getElementById('previewClose');
        const previewTitle = document.getElementById('previewTitle');
        const previewAuthor = document.getElementById('previewAuthor');
        const previewDate = document.getElementById('previewDate');
        const previewCategory = document.getElementById('previewCategory');
        const previewImage = document.getElementById('previewImage');
        const previewBody = document.getElementById('previewBody');
        const visibilityOptions = document.querySelectorAll('.visibility-option');
        const schedulePublish = document.getElementById('schedulePublish');
        const scheduleInput = document.getElementById('scheduleInput');
        const publishDate = document.getElementById('publishDate');
        const clearScheduleBtn = document.getElementById('clearScheduleBtn');

        // Current User and Selected Chat User
        let currentUser = null;
        let currentArticleId = null;
        let selectedRating = 0;
        let userFollowing = [];
        let allUsers = [];
        let articles = [];
        let articleTagsArray = [];
        let uploadedImageUrl = '';
        let realtimeSubscriptions = [];
        let currentVisibility = 'public';
        let scheduledDate = null;

        // Initialize the app
        function initApp() {
            // Check if user is logged in using modular auth
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    // User is signed in
                    currentUser = user;
                    showMainPages();
                    updateUserInfo(user);
                    loadUserProfile(user);
                    checkFirstTimeUser(user);
                    loadAllUsers();
                    loadArticles();
                    setupRealtimeListeners();
                } else {
                    // User is signed out
                    currentUser = null;
                    showAuthPage();
                    // Clean up realtime listeners
                    cleanupRealtimeListeners();
                }
            });

            // Set up event listeners
            setupEventListeners();
            
            // Load settings from localStorage
            loadSettings();
            
            // Check for article parameter in URL
            checkUrlForArticle();
            
            // Initialize enhanced editor
            initEditor();
        }

        // Initialize enhanced editor
        function initEditor() {
            // Show/hide placeholder based on content
            function updatePlaceholder() {
                if (editorContent.textContent.trim() === '') {
                    editorPlaceholder.style.display = 'block';
                } else {
                    editorPlaceholder.style.display = 'none';
                }
            }

            // Update word and character count
            function updateCounts() {
                const text = editorContent.textContent || '';
                const words = text.trim() ? text.trim().split(/\s+/).length : 0;
                const characters = text.length;
                
                wordCount.textContent = `${words} words`;
                charCount.textContent = `${characters} characters`;
            }

            // Execute command from toolbar
            function execCommand(command, value = null) {
                document.execCommand(command, false, value);
                editorContent.focus();
            }

            // Format block
            formatSelect.addEventListener('change', function() {
                if (this.value === 'p') {
                    execCommand('formatBlock', '<p>');
                } else {
                    execCommand('formatBlock', `<${this.value}>`);
                }
                this.value = 'p'; // Reset to paragraph
            });

            // Toolbar button clicks
            editorToolbar.addEventListener('click', function(e) {
                if (e.target.classList.contains('toolbar-btn')) {
                    const button = e.target.closest('.toolbar-btn');
                    const command = button.getAttribute('data-command');
                    const value = button.getAttribute('data-value');
                    
                    if (command === 'createLink') {
                        const url = prompt('Enter the URL:');
                        if (url) {
                            execCommand(command, url);
                        }
                    } else {
                        execCommand(command, value);
                    }
                    
                    // Update active state for format buttons
                    if (['bold', 'italic', 'underline'].includes(command)) {
                        button.classList.toggle('active');
                    }
                }
            });

            // Insert image
            insertImageBtn.addEventListener('click', function() {
                const url = prompt('Enter image URL:');
                if (url) {
                    execCommand('insertImage', url);
                }
            });

            // Insert table
            insertTableBtn.addEventListener('click', function() {
                const rows = parseInt(prompt('Number of rows:', '3')) || 3;
                const cols = parseInt(prompt('Number of columns:', '3')) || 3;
                
                let tableHTML = '<table style="width: 100%; border-collapse: collapse;">';
                for (let i = 0; i < rows; i++) {
                    tableHTML += '<tr>';
                    for (let j = 0; j < cols; j++) {
                        tableHTML += `<td style="border: 1px solid #333; padding: 8px;">&nbsp;</td>`;
                    }
                    tableHTML += '</tr>';
                }
                tableHTML += '</table>';
                
                execCommand('insertHTML', tableHTML);
            });

            // Update counts and placeholder on input
            editorContent.addEventListener('input', function() {
                updatePlaceholder();
                updateCounts();
            });

            // Initialize counts and placeholder
            updatePlaceholder();
            updateCounts();

            // Save draft
            saveDraftBtn.addEventListener('click', function() {
                // In a real app, this would save to Firestore
                showToast('Draft saved successfully!');
            });

            // Preview article
            previewBtn.addEventListener('click', function() {
                const title = document.getElementById('articleTitle').value || 'Untitled Article';
                const category = document.getElementById('articleCategory').value || 'Uncategorized';
                const image = document.getElementById('articleImage').value || '';
                const content = editorContent.innerHTML;
                
                previewTitle.textContent = title;
                previewAuthor.textContent = currentUser ? currentUser.displayName || 'Anonymous' : 'Anonymous';
                previewDate.textContent = scheduledDate ? new Date(scheduledDate).toLocaleDateString() : 'Immediately';
                previewCategory.textContent = category;
                
                if (image) {
                    previewImage.style.backgroundImage = `url('${image}')`;
                    previewImage.style.display = 'block';
                } else {
                    previewImage.style.display = 'none';
                }
                
                previewBody.innerHTML = content;
                previewModal.classList.add('active');
            });

            // Close preview
            previewClose.addEventListener('click', function() {
                previewModal.classList.remove('active');
            });

            // Visibility options
            visibilityOptions.forEach(option => {
                option.addEventListener('click', function() {
                    visibilityOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentVisibility = this.getAttribute('data-visibility');
                });
            });

            // Schedule publishing
            schedulePublish.addEventListener('change', function() {
                if (this.checked) {
                    scheduleInput.style.display = 'flex';
                    // Set minimum date to current date/time
                    const now = new Date();
                    const year = now.getFullYear();
                    const month = String(now.getMonth() + 1).padStart(2, '0');
                    const day = String(now.getDate()).padStart(2, '0');
                    const hours = String(now.getHours()).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    
                    publishDate.min = `${year}-${month}-${day}T${hours}:${minutes}`;
                    publishDate.value = `${year}-${month}-${day}T${hours}:${minutes}`;
                } else {
                    scheduleInput.style.display = 'none';
                    scheduledDate = null;
                }
            });

            publishDate.addEventListener('change', function() {
                scheduledDate = this.value;
            });

            clearScheduleBtn.addEventListener('click', function() {
                schedulePublish.checked = false;
                scheduleInput.style.display = 'none';
                scheduledDate = null;
            });

            // Enhanced publish article function
            async function publishArticleEnhanced(e) {
                e.preventDefault();
                
                if (!currentUser) {
                    showToast('Please log in to publish articles', 'error');
                    return;
                }

                const title = document.getElementById('articleTitle').value.trim();
                const category = document.getElementById('articleCategory').value;
                const image = uploadedImageUrl || document.getElementById('articleImage').value.trim();
                const excerpt = document.getElementById('articleExcerpt').value.trim();
                const content = editorContent.innerHTML;
                const tags = articleTagsArray;

                if (!title || !category || !excerpt || !content || content === '<br>') {
                    showToast('Please fill in all required fields', 'error');
                    return;
                }

                try {
                    // Create article in Firestore
                    const articleData = {
                        title: title,
                        category: category,
                        image: image || 'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                        excerpt: excerpt,
                        content: content,
                        tags: tags,
                        authorId: currentUser.uid,
                        authorName: currentUser.displayName || 'Anonymous',
                        publishedAt: scheduledDate ? new Date(scheduledDate) : serverTimestamp(),
                        readCount: 0,
                        likes: [],
                        comments: [],
                        rating: 0,
                        ratingCount: 0,
                        status: currentVisibility === 'draft' ? 'draft' : 'published',
                        visibility: currentVisibility
                    };

                    const articleRef = await addDoc(collection(db, 'articles'), articleData);

                    // Update user's article count if published
                    if (currentVisibility !== 'draft') {
                        const userRef = doc(db, 'users', currentUser.uid);
                        await updateDoc(userRef, {
                            articles: increment(1)
                        });
                    }

                    // Clear form
                    createArticleForm.reset();
                    editorContent.innerHTML = '';
                    articleTagsArray = [];
                    renderTags();
                    // Reset image preview
                    imagePreview.innerHTML = '<div class="image-upload-placeholder"><i class="fas fa-image"></i><p>No image selected</p></div>';
                    uploadedImageUrl = '';
                    
                    // Reset visibility and schedule
                    visibilityOptions.forEach(opt => opt.classList.remove('active'));
                    document.querySelector('.visibility-option[data-visibility="public"]').classList.add('active');
                    currentVisibility = 'public';
                    schedulePublish.checked = false;
                    scheduleInput.style.display = 'none';
                    scheduledDate = null;

                    updatePlaceholder();
                    updateCounts();

                    const message = currentVisibility === 'draft' ? 'Draft saved successfully!' : 
                                   scheduledDate ? 'Article scheduled for publication!' : 'Article published successfully!';
                    showToast(message);
                    
                    if (currentVisibility !== 'draft') {
                        showPage('articles');
                        // Reload articles to show the new one
                        loadArticles();
                    }
                } catch (error) {
                    console.error('Error publishing article:', error);
                    showToast('Error publishing article: ' + error.message, 'error');
                }
            }

            // Replace the original publishArticle function
            createArticleForm.removeEventListener('submit', publishArticle);
            createArticleForm.addEventListener('submit', publishArticleEnhanced);
        }

        // Set up real-time listeners for likes and comments
        function setupRealtimeListeners() {
            if (!currentUser) return;
            
            // Listen for real-time updates on articles
            const articlesRef = collection(db, 'articles');
            const articlesQuery = query(articlesRef, orderBy('publishedAt', 'desc'));
            
            const articlesUnsubscribe = onSnapshot(articlesQuery, (snapshot) => {
                articles = [];
                snapshot.forEach(doc => {
                    const articleData = doc.data();
                    articles.push({
                        id: doc.id,
                        ...articleData,
                        date: articleData.publishedAt ? 
                            articleData.publishedAt.toDate().toLocaleDateString() : 
                            new Date().toLocaleDateString()
                    });
                });
                
                renderArticles();
                
                // If we're on the article detail page, update it
                if (currentArticleId && articleDetailPage.classList.contains('active')) {
                    const article = articles.find(a => a.id === currentArticleId);
                    if (article) {
                        updateArticleDetail(article);
                    }
                }
            });
            
            realtimeSubscriptions.push(articlesUnsubscribe);
            
            // Listen for real-time updates on user data
            const userRef = doc(db, 'users', currentUser.uid);
            const userUnsubscribe = onSnapshot(userRef, (doc) => {
                if (doc.exists()) {
                    const userData = doc.data();
                    updateProfileUI(userData);
                }
            });
            
            realtimeSubscriptions.push(userUnsubscribe);
        }

        // Clean up real-time listeners
        function cleanupRealtimeListeners() {
            realtimeSubscriptions.forEach(unsubscribe => {
                if (typeof unsubscribe === 'function') {
                    unsubscribe();
                }
            });
            realtimeSubscriptions = [];
        }

        // Set up event listeners
        function setupEventListeners() {
            // Mobile menu toggle
            mobileMenuBtn.addEventListener('click', () => {
                mobileNav.classList.toggle('active');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!mobileNav.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                    mobileNav.classList.remove('active');
                }
            });

            // Create article button
            createArticleBtn.addEventListener('click', () => {
                showPage('create-article');
            });

            // Auth tab switching
            authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    
                    // Update active tab
                    authTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Show corresponding form
                    authForms.forEach(form => {
                        form.classList.remove('active');
                        if (form.id === `${tabName}Form`) {
                            form.classList.add('active');
                        }
                    });
                });
            });

            // Login form submission - MODULAR VERSION
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                try {
                    const userCredential = await signInWithEmailAndPassword(auth, email, password);
                    console.log('User logged in:', userCredential.user);
                    showToast('Login successful!', 'success');
                } catch (error) {
                    console.error('Login error:', error);
                    showToast('Login failed: ' + error.message, 'error');
                }
            });

            // Signup form submission - MODULAR VERSION
            signupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                const bio = document.getElementById('signupBio').value;
                
                try {
                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    console.log('User signed up:', userCredential.user);
                    
                    // Update profile with display name
                    await updateProfile(userCredential.user, {
                        displayName: name
                    });
                    
                    // Save additional user data to Firestore using modular syntax
                    await setDoc(doc(db, 'users', userCredential.user.uid), {
                        name: name,
                        email: email,
                        bio: bio,
                        joinDate: new Date().toISOString(),
                        articles: 0,
                        followers: [],
                        following: [],
                        firstTimeUser: true,
                        profilePicture: ''
                    });
                    
                    console.log('User data saved to Firestore');
                    showToast('Account created successfully!', 'success');
                } catch (error) {
                    console.error('Signup error:', error);
                    showToast('Signup failed: ' + error.message, 'error');
                }
            });

            // Tags input functionality
            articleTags.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ',') {
                    e.preventDefault();
                    addTag(articleTags.value.trim());
                    articleTags.value = '';
                }
            });

            // Google login - MODULAR VERSION
            googleLoginBtn.addEventListener('click', async () => {
                const provider = new GoogleAuthProvider();
                try {
                    const result = await signInWithPopup(auth, provider);
                    console.log('Google login successful:', result.user);
                    
                    // Check if user exists in Firestore, if not create a record
                    const userRef = doc(db, 'users', result.user.uid);
                    const userDoc = await getDoc(userRef);
                    
                    if (!userDoc.exists()) {
                        await setDoc(userRef, {
                            name: result.user.displayName,
                            email: result.user.email,
                            bio: '',
                            joinDate: new Date().toISOString(),
                            articles: 0,
                            followers: [],
                            following: [],
                            firstTimeUser: true,
                            profilePicture: result.user.photoURL || ''
                        });
                    }
                    showToast('Google login successful!', 'success');
                } catch (error) {
                    console.error('Google login error:', error);
                    showToast('Google login failed: ' + error.message, 'error');
                }
            });

            // Facebook login - MODULAR VERSION
            facebookLoginBtn.addEventListener('click', async () => {
                const provider = new FacebookAuthProvider();
                try {
                    const result = await signInWithPopup(auth, provider);
                    console.log('Facebook login successful:', result.user);
                    
                    // Check if user exists in Firestore, if not create a record
                    const userRef = doc(db, 'users', result.user.uid);
                    const userDoc = await getDoc(userRef);
                    
                    if (!userDoc.exists()) {
                        await setDoc(userRef, {
                            name: result.user.displayName,
                            email: result.user.email,
                            bio: '',
                            joinDate: new Date().toISOString(),
                            articles: 0,
                            followers: [],
                            following: [],
                            firstTimeUser: true,
                            profilePicture: result.user.photoURL || ''
                        });
                    }
                    showToast('Facebook login successful!', 'success');
                } catch (error) {
                    console.error('Facebook login error:', error);
                    showToast('Facebook login failed: ' + error.message, 'error');
                }
            });

            // Logout - MODULAR VERSION
            logoutBtn.addEventListener('click', async () => {
                try {
                    await signOut(auth);
                    console.log('User signed out');
                    showToast('Logged out successfully', 'success');
                } catch (error) {
                    console.error('Logout error:', error);
                    showToast('Logout failed: ' + error.message, 'error');
                }
            });

            // Logout from settings - MODULAR VERSION
            logoutBtnSettings.addEventListener('click', async () => {
                try {
                    await signOut(auth);
                    console.log('User signed out');
                    showToast('Logged out successfully', 'success');
                } catch (error) {
                    console.error('Logout error:', error);
                    showToast('Logout failed: ' + error.message, 'error');
                }
            });

            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    const page = link.getAttribute('data-page');
                    showPage(page);
                    mobileNav.classList.remove('active');
                });
            });

            // Search functionality
            searchInput.addEventListener('input', filterArticles);

            // Save profile changes - MODULAR VERSION
            saveProfileBtn.addEventListener('click', async () => {
                if (!currentUser) return;
                
                const name = settingsName.value;
                const email = settingsEmail.value;
                const bio = settingsBio.value;
                const currentPassword = settingsCurrentPassword.value;
                const newPassword = settingsNewPassword.value;
                const confirmPassword = settingsConfirmPassword.value;
                
                try {
                    // Update auth profile
                    await updateProfile(currentUser, {
                        displayName: name
                    });
                    
                    // Update Firestore
                    const userRef = doc(db, 'users', currentUser.uid);
                    await updateDoc(userRef, {
                        name: name,
                        email: email,
                        bio: bio
                    });
                    
                    // Handle password change if provided
                    if (newPassword && confirmPassword) {
                        if (newPassword !== confirmPassword) {
                            showToast('New passwords do not match', 'error');
                            return;
                        }
                        
                        if (!currentPassword) {
                            showToast('Please enter your current password to change it', 'error');
                            return;
                        }
                        
                        // Reauthenticate user
                        const credential = EmailAuthProvider.credential(currentUser.email, currentPassword);
                        await reauthenticateWithCredential(currentUser, credential);
                        
                        // Update password
                        await updatePassword(currentUser, newPassword);
                        showToast('Password updated successfully!', 'success');
                        
                        // Clear password fields
                        settingsCurrentPassword.value = '';
                        settingsNewPassword.value = '';
                        settingsConfirmPassword.value = '';
                    }
                    
                    // Handle profile picture upload
                    const profilePictureFile = settingsProfilePicture.files[0];
                    if (profilePictureFile) {
                        await uploadProfilePicture(profilePictureFile);
                    }
                    
                    // Save settings to localStorage
                    saveSettings();
                    
                    showToast('Profile updated successfully!', 'success');
                    loadUserProfile(currentUser);
                } catch (error) {
                    console.error('Error updating profile:', error);
                    showToast('Error updating profile: ' + error.message, 'error');
                }
            });

            // Profile avatar upload
            profileAvatarUpload.addEventListener('click', () => {
                profilePictureUpload.click();
            });
            
            profilePictureUpload.addEventListener('change', async (e) => {
                if (e.target.files[0]) {
                    await uploadProfilePicture(e.target.files[0]);
                }
            });

            // Like button
            likeBtn.addEventListener('click', toggleLike);

            // Comment rating stars
            commentRating.addEventListener('click', e => {
                if (e.target.classList.contains('comment-star')) {
                    const rating = parseInt(e.target.getAttribute('data-rating'));
                    setCommentRating(rating);
                }
            });

            // Comment submission
            commentSubmit.addEventListener('click', submitComment);

            // Follow button
            profileFollowBtn.addEventListener('click', toggleFollow);

            // Delete account
            deleteAccountBtn.addEventListener('click', deleteAccount);

            // Download data
            downloadDataBtn.addEventListener('click', downloadData);

            // Manage blocked users
            manageBlockedUsersBtn.addEventListener('click', manageBlockedUsers);

            // Settings event listeners
            colorOptions.forEach(option => {
                option.addEventListener('click', () => {
                    colorOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    saveSettings();
                });
            });

            fontOptions.forEach(option => {
                option.addEventListener('click', () => {
                    fontOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    saveSettings();
                });
            });

            layoutOptions.forEach(option => {
                option.addEventListener('click', () => {
                    layoutOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    saveSettings();
                });
            });

            cardStyleOptions.forEach(option => {
                option.addEventListener('click', () => {
                    cardStyleOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    saveSettings();
                });
            });

            // Save settings when any setting changes
            const settingElements = [
                blogVisibility, commentsToggle, autoSaveToggle, postSorting, 
                readingTimeToggle, authorInfoToggle, sharingToggle, themeMode,
                followerNotificationToggle, commentNotificationToggle, publishNotificationToggle,
                analyticsReportToggle, soundAlertToggle, followersVisibility, messagesToggle,
                autoShareToggle, profileVisibility, commentPermissions, onlineStatusToggle,
                twoFactorToggle
            ];

            settingElements.forEach(element => {
                if (element.type === 'checkbox') {
                    element.addEventListener('change', saveSettings);
                } else {
                    element.addEventListener('change', saveSettings);
                }
            });

            // New event listeners for image upload and sharing
            articleImageUpload.addEventListener('change', handleImageUpload);
            
            // Share functionality
            shareArticleBtn.addEventListener('click', openShareModal);
            copyArticleLinkBtn.addEventListener('click', copyArticleLink);
            shareModalClose.addEventListener('click', closeShareModal);
            shareCopyBtn.addEventListener('click', copyShareLink);
            
            // Share platform buttons
            sharePlatforms.forEach(platform => {
                platform.addEventListener('click', () => {
                    const platformName = platform.getAttribute('data-platform');
                    shareToPlatform(platformName);
                });
            });
            
            // Close modal when clicking outside
            shareModal.addEventListener('click', (e) => {
                if (e.target === shareModal) {
                    closeShareModal();
                }
            });
        }

        // Add tag to article
        function addTag(tagText) {
            if (tagText && !articleTagsArray.includes(tagText)) {
                articleTagsArray.push(tagText);
                renderTags();
            }
        }

        // Remove tag from article
        function removeTag(tagText) {
            articleTagsArray = articleTagsArray.filter(tag => tag !== tagText);
            renderTags();
        }

        // Render tags
        function renderTags() {
            tagsList.innerHTML = '';
            articleTagsArray.forEach(tag => {
                const tagElement = document.createElement('div');
                tagElement.className = 'tag';
                tagElement.innerHTML = `
                    ${tag}
                    <span class="tag-remove" data-tag="${tag}">&times;</span>
                `;
                tagsList.appendChild(tagElement);
            });

            // Add event listeners to remove buttons
            document.querySelectorAll('.tag-remove').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const tag = e.target.getAttribute('data-tag');
                    removeTag(tag);
                });
            });
        }

        // Handle image upload for article
        async function handleImageUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            // Validate file type
            if (!file.type.match('image.*')) {
                showToast('Please select a valid image file', 'error');
                return;
            }
            
            // Validate file size (max 5MB)
            if (file.size > 5 * 1024 * 1024) {
                showToast('Image size should be less than 5MB', 'error');
                return;
            }
            
            try {
                // Show loading state
                imagePreview.innerHTML = '<div class="image-upload-placeholder"><i class="fas fa-spinner fa-spin"></i><p>Uploading...</p></div>';
                
                // Create a reference to the file location
                const storageRef = ref(storage, `article-images/${Date.now()}_${file.name}`);
                
                // Upload the file
                const snapshot = await uploadBytes(storageRef, file);
                
                // Get the download URL
                const downloadURL = await getDownloadURL(snapshot.ref);
                
                // Update the preview
                imagePreview.innerHTML = `<img src="${downloadURL}" alt="Article preview">`;
                
                // Store the URL for later use
                uploadedImageUrl = downloadURL;
                
                // Update the hidden input
                document.getElementById('articleImage').value = downloadURL;
                
                showToast('Image uploaded successfully!');
            } catch (error) {
                console.error('Error uploading image:', error);
                showToast('Error uploading image: ' + error.message, 'error');
                // Reset preview
                imagePreview.innerHTML = '<div class="image-upload-placeholder"><i class="fas fa-image"></i><p>No image selected</p></div>';
            }
        }

        // Load articles from Firebase
        async function loadArticles() {
            try {
                const articlesRef = collection(db, 'articles');
                const q = query(articlesRef, orderBy('publishedAt', 'desc'));
                const snapshot = await getDocs(q);
                
                articles = [];
                snapshot.forEach(doc => {
                    const articleData = doc.data();
                    articles.push({
                        id: doc.id,
                        ...articleData,
                        // Convert Firestore timestamp to Date
                        date: articleData.publishedAt ? 
                            articleData.publishedAt.toDate().toLocaleDateString() : 
                            new Date().toLocaleDateString(),
                        likeCount: articleData.likes ? articleData.likes.length : 0,
                        commentCount: articleData.comments ? articleData.comments.length : 0
                    });
                });
                
                renderArticles();
            } catch (error) {
                console.error('Error loading articles:', error);
            }
        }

        // Upload profile picture
        async function uploadProfilePicture(file) {
            if (!currentUser) return;
            
            try {
                // Create a reference to the file location
                const storageRef = ref(storage, `profile-pictures/${currentUser.uid}`);
                
                // Upload the file
                const snapshot = await uploadBytes(storageRef, file);
                
                // Get the download URL
                const downloadURL = await getDownloadURL(snapshot.ref);
                
                // Update user profile with the new photo URL
                await updateProfile(currentUser, {
                    photoURL: downloadURL
                });
                
                // Update Firestore
                const userRef = doc(db, 'users', currentUser.uid);
                await updateDoc(userRef, {
                    profilePicture: downloadURL
                });
                
                // Update UI
                updateUserInfo(currentUser);
                
                showToast('Profile picture updated successfully!');
            } catch (error) {
                console.error('Error uploading profile picture:', error);
                showToast('Error uploading profile picture: ' + error.message, 'error');
            }
        }

        // Show authentication page
        function showAuthPage() {
            authPage.classList.add('active');
            homePage.classList.remove('active');
            aboutPage.classList.remove('active');
            articlesPage.classList.remove('active');
            createArticlePage.classList.remove('active');
            articleDetailPage.classList.remove('active');
            profilePage.classList.remove('active');
            settingsPage.classList.remove('active');
            userInfo.style.display = 'none';
        }

        // Show main pages after login
        function showMainPages() {
            authPage.classList.remove('active');
            homePage.classList.add('active');
            userInfo.style.display = 'flex';
        }

        // Show specific page
        function showPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show the selected page
            document.getElementById(pageName).classList.add('active');
            
            // If showing profile page, check if it's the current user's profile
            if (pageName === 'profile') {
                if (currentUser) {
                    // It's the current user's profile
                    profileFollowBtn.style.display = 'none';
                    loadUserArticles(currentUser.uid);
                } else {
                    // It's another user's profile
                    profileFollowBtn.style.display = 'inline-block';
                }
            }
            
            // If showing articles page, load all articles
            if (pageName === 'articles') {
                loadArticles();
            }
        }

        // Update user information in the UI
        function updateUserInfo(user) {
            const displayName = user.displayName || 'User';
            const email = user.email || 'user@example.com';
            const photoURL = user.photoURL || '';
            const firstLetter = displayName.charAt(0).toUpperCase();
            
            userAvatar.textContent = photoURL ? '' : firstLetter;
            userAvatar.style.backgroundImage = photoURL ? `url(${photoURL})` : '';
            
            profileAvatar.textContent = photoURL ? '' : firstLetter;
            profileAvatar.style.backgroundImage = photoURL ? `url(${photoURL})` : '';
            
            profileName.textContent = displayName;
            profileEmail.textContent = email;
        }

        // Update profile UI with data from Firestore
        function updateProfileUI(userData) {
            profileName.textContent = userData.name || currentUser.displayName || 'User';
            profileBio.textContent = userData.bio || 'This is where the user\'s bio will appear. They can edit this in their settings.';
            profileArticlesCount.textContent = userData.articles || 0;
            profileFollowersCount.textContent = userData.followers ? userData.followers.length : 0;
            profileFollowingCount.textContent = userData.following ? userData.following.length : 0;
            
            if (userData.joinDate) {
                const joinDate = new Date(userData.joinDate);
                profileJoinDate.textContent = `Member since ${joinDate.toLocaleString('default', { month: 'long' })} ${joinDate.getFullYear()}`;
            }
            
            // Update settings form
            settingsName.value = userData.name || currentUser.displayName || '';
            settingsEmail.value = userData.email || currentUser.email || '';
            settingsBio.value = userData.bio || '';
            
            // Update profile picture if available
            if (userData.profilePicture) {
                userAvatar.style.backgroundImage = `url(${userData.profilePicture})`;
                userAvatar.textContent = '';
                profileAvatar.style.backgroundImage = `url(${userData.profilePicture})`;
                profileAvatar.textContent = '';
            }
        }

        // Load user profile from Firestore - MODULAR VERSION
        async function loadUserProfile(user) {
            try {
                const userRef = doc(db, 'users', user.uid);
                const userDoc = await getDoc(userRef);
                
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    updateProfileUI(userData);
                }
            } catch (error) {
                console.error('Error loading user profile:', error);
            }
        }

        // Load user's articles
        async function loadUserArticles(userId) {
            try {
                const articlesRef = collection(db, 'articles');
                const q = query(articlesRef, where('authorId', '==', userId), orderBy('publishedAt', 'desc'));
                const snapshot = await getDocs(q);
                
                const userArticles = [];
                snapshot.forEach(doc => {
                    const articleData = doc.data();
                    userArticles.push({
                        id: doc.id,
                        ...articleData,
                        date: articleData.publishedAt ? 
                            articleData.publishedAt.toDate().toLocaleDateString() : 
                            new Date().toLocaleDateString(),
                        likeCount: articleData.likes ? articleData.likes.length : 0,
                        commentCount: articleData.comments ? articleData.comments.length : 0
                    });
                });
                
                renderUserArticles(userArticles);
            } catch (error) {
                console.error('Error loading user articles:', error);
            }
        }

        // Render user's articles
        function renderUserArticles(userArticles) {
            profileArticlesGrid.innerHTML = '';
            
            if (userArticles.length === 0) {
                profileArticlesGrid.innerHTML = '<p>No articles published yet.</p>';
                return;
            }
            
            userArticles.forEach(article => {
                profileArticlesGrid.appendChild(createArticleCard(article));
            });
        }

        // Load all users from Firestore
        async function loadAllUsers() {
            try {
                const usersRef = collection(db, 'users');
                const snapshot = await getDocs(usersRef);
                allUsers = [];
                snapshot.forEach(doc => {
                    if (doc.id !== currentUser.uid) {
                        allUsers.push({
                            id: doc.id,
                            ...doc.data()
                        });
                    }
                });
                renderUserSuggestions();
            } catch (error) {
                console.error('Error loading users:', error);
            }
        }

        // Check if user is first-time user and show suggestions
        function checkFirstTimeUser(user) {
            // In a real app, you would check Firestore
            // For this demo, we'll show suggestions for all users
            suggestionsSection.style.display = 'block';
            renderUserSuggestions();
        }

        // Render articles to the page
        function renderArticles() {
            // Clear existing articles
            featuredArticlesGrid.innerHTML = '';
            allArticlesGrid.innerHTML = '';
            
            // Render featured articles (first 3)
            articles.slice(0, 3).forEach(article => {
                featuredArticlesGrid.appendChild(createArticleCard(article));
            });
            
            // Render all articles
            articles.forEach(article => {
                allArticlesGrid.appendChild(createArticleCard(article));
            });
        }

        // Create article card element
        function createArticleCard(article) {
            const card = document.createElement('div');
            card.className = 'article-card';
            card.setAttribute('data-id', article.id);
            card.innerHTML = `
                <div class="article-img" style="background-image: url('${article.image}')"></div>
                <div class="article-content">
                    <h3>${article.title}</h3>
                    <div class="article-meta">
                        <span>${article.authorName}</span>
                        <span>${article.date}</span>
                    </div>
                    <p class="article-excerpt">${article.excerpt}</p>
                    <div class="engagement-metrics">
                        <div class="metric">
                            <div class="metric-value">${article.readCount || 0}</div>
                            <div class="metric-label">Reads</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${article.likeCount || 0}</div>
                            <div class="metric-label">Likes</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${article.commentCount || 0}</div>
                            <div class="metric-label">Comments</div>
                        </div>
                    </div>
                    <div class="article-actions">
                        <a href="#" class="read-more" data-id="${article.id}">Read More <i class="fas fa-arrow-right"></i></a>
                        <div class="rating">
                            ${createRatingStars(article.rating || 0)}
                        </div>
                    </div>
                </div>
            `;
            
            // Add click event to read more button
            const readMoreBtn = card.querySelector('.read-more');
            readMoreBtn.addEventListener('click', (e) => {
                e.preventDefault();
                showArticleDetail(article.id);
            });
            
            return card;
        }

        // Create rating stars
        function createRatingStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star star active"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt star active"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star star"></i>';
            }
            
            return stars;
        }

        // Show article detail
        function showArticleDetail(articleId) {
            const article = articles.find(a => a.id === articleId);
            if (!article) return;
            
            currentArticleId = articleId;
            updateArticleDetail(article);
            
            // Show article detail page
            showPage('article-detail');
            
            // Load comments
            loadComments(articleId);
            
            // Increment read count
            incrementReadCount(articleId);
        }

        // Update article detail view
        function updateArticleDetail(article) {
            // Update article detail page
            document.getElementById('detailTitle').textContent = article.title;
            document.getElementById('detailAuthor').textContent = article.authorName;
            document.getElementById('detailDate').textContent = article.date;
            document.getElementById('detailCategory').textContent = article.category;
            document.getElementById('detailImage').style.backgroundImage = `url('${article.image}')`;
            document.getElementById('detailBody').innerHTML = article.content;
            detailReadCount.textContent = article.readCount || 0;
            detailLikeCount.textContent = article.likeCount || 0;
            detailCommentCount.textContent = article.commentCount || 0;
            
            // Update tags
            const tagsContainer = document.getElementById('detailTags');
            tagsContainer.innerHTML = '';
            if (article.tags && article.tags.length > 0) {
                article.tags.forEach(tag => {
                    const tagElement = document.createElement('span');
                    tagElement.className = 'tag';
                    tagElement.textContent = tag;
                    tagsContainer.appendChild(tagElement);
                });
            }
            
            // Update rating
            const ratingContainer = document.getElementById('detailRating');
            ratingContainer.innerHTML = createRatingStars(article.rating || 0);
            
            // Update rating count
            document.getElementById('detailRatingCount').textContent = `(${article.ratingCount || 0} ratings)`;
            
            // Update like button state
            const isLiked = article.likes && article.likes.includes(currentUser.uid);
            updateLikeButton(isLiked);
            
            // Reset comment rating
            setCommentRating(0);
        }

        // Update like button state
        function updateLikeButton(isLiked) {
            if (isLiked) {
                likeBtn.innerHTML = '<i class="fas fa-heart"></i> Liked';
                likeBtn.classList.add('liked');
            } else {
                likeBtn.innerHTML = '<i class="far fa-heart"></i> Like';
                likeBtn.classList.remove('liked');
            }
        }

        // Increment article read count
        async function incrementReadCount(articleId) {
            try {
                const articleRef = doc(db, 'articles', articleId);
                await updateDoc(articleRef, {
                    readCount: increment(1)
                });
            } catch (error) {
                console.error('Error incrementing read count:', error);
            }
        }

        // Load comments for an article
        async function loadComments(articleId) {
            try {
                const articleRef = doc(db, 'articles', articleId);
                const articleDoc = await getDoc(articleRef);
                
                const commentsList = document.getElementById('commentsList');
                commentsList.innerHTML = '';
                
                if (articleDoc.exists()) {
                    const articleData = articleDoc.data();
                    const comments = articleData.comments || [];
                    
                    if (comments.length === 0) {
                        commentsList.innerHTML = '<p>No comments yet. Be the first to comment!</p>';
                        return;
                    }
                    
                    // Sort comments by date (newest first)
                    comments.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                    
                    comments.forEach(comment => {
                        const commentElement = document.createElement('div');
                        commentElement.className = 'comment';
                        
                        const commentDate = new Date(comment.timestamp);
                        const timeAgo = getTimeAgo(commentDate);
                        
                        commentElement.innerHTML = `
                            <div class="comment-header">
                                <span class="comment-author">${comment.authorName}</span>
                                <span class="comment-date">${timeAgo}</span>
                            </div>
                            <p class="comment-text">${comment.text}</p>
                            <div class="comment-rating">
                                <div class="comment-stars">
                                    ${createRatingStars(comment.rating)}
                                </div>
                            </div>
                        `;
                        commentsList.appendChild(commentElement);
                    });
                }
            } catch (error) {
                console.error('Error loading comments:', error);
            }
        }

        // Helper function to get time ago string
        function getTimeAgo(date) {
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            if (diffInSeconds < 60) {
                return 'Just now';
            } else if (diffInSeconds < 3600) {
                return `${Math.floor(diffInSeconds / 60)} minutes ago`;
            } else if (diffInSeconds < 86400) {
                return `${Math.floor(diffInSeconds / 3600)} hours ago`;
            } else if (diffInSeconds < 2592000) {
                return `${Math.floor(diffInSeconds / 86400)} days ago`;
            } else {
                return date.toLocaleDateString();
            }
        }

        // Filter articles based on search input
        function filterArticles() {
            const searchTerm = searchInput.value.toLowerCase();
            const filteredArticles = articles.filter(article => 
                article.title.toLowerCase().includes(searchTerm) || 
                article.excerpt.toLowerCase().includes(searchTerm) ||
                article.category.toLowerCase().includes(searchTerm) ||
                (article.tags && article.tags.some(tag => tag.toLowerCase().includes(searchTerm)))
            );
            
            // Clear existing articles
            allArticlesGrid.innerHTML = '';
            
            // Render filtered articles
            filteredArticles.forEach(article => {
                allArticlesGrid.appendChild(createArticleCard(article));
            });
        }

        // Render user suggestions for first-time users
        function renderUserSuggestions() {
            suggestionsGrid.innerHTML = '';
            
            // Show first 4 users as suggestions
            allUsers.slice(0, 4).forEach(user => {
                const firstLetter = user.name ? user.name.charAt(0).toUpperCase() : 'U';
                const profilePicture = user.profilePicture || '';
                const isFollowing = userFollowing.includes(user.id);
                
                const suggestionElement = document.createElement('div');
                suggestionElement.className = 'suggestion-card';
                suggestionElement.innerHTML = `
                    <div class="suggestion-avatar" style="background-image: ${profilePicture ? `url(${profilePicture})` : ''}">${profilePicture ? '' : firstLetter}</div>
                    <h4>${user.name || 'User'}</h4>
                    <p>${user.bio || 'BlogHub user'}</p>
                    <div class="suggestion-stats">
                        <span>${user.followers ? user.followers.length : 0} followers</span>
                        <span>${user.articles || 0} articles</span>
                    </div>
                    <button class="follow-btn ${isFollowing ? 'following' : ''}" data-id="${user.id}">${isFollowing ? 'Following' : 'Follow'}</button>
                `;
                
                const followBtn = suggestionElement.querySelector('.follow-btn');
                followBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (isFollowing) {
                        unfollowUser(user.id);
                    } else {
                        followUser(user.id);
                    }
                });
                
                suggestionsGrid.appendChild(suggestionElement);
            });
        }

        // Toggle follow status
        function toggleFollow() {
            if (!currentUser) {
                showToast('Please log in to follow users', 'error');
                return;
            }
            
            // In this simplified version, we're just toggling the button state
            // In a real app, you would update Firestore
            if (profileFollowBtn.classList.contains('following')) {
                profileFollowBtn.textContent = 'Follow';
                profileFollowBtn.classList.remove('following');
            } else {
                profileFollowBtn.textContent = 'Following';
                profileFollowBtn.classList.add('following');
            }
        }

        // Follow user - MODULAR VERSION
        async function followUser(userId) {
            if (!currentUser) return;
            
            try {
                // Update current user's following list
                const currentUserRef = doc(db, 'users', currentUser.uid);
                await updateDoc(currentUserRef, {
                    following: arrayUnion(userId)
                });
                
                // Update target user's followers list
                const targetUserRef = doc(db, 'users', userId);
                await updateDoc(targetUserRef, {
                    followers: arrayUnion(currentUser.uid)
                });
                
                // Update userFollowing array
                userFollowing.push(userId);
                
                // Update UI
                const followBtn = document.querySelector(`.follow-btn[data-id="${userId}"]`);
                if (followBtn) {
                    followBtn.textContent = 'Following';
                    followBtn.classList.add('following');
                }
                
                // Show success message
                showToast('You are now following this user!');
            } catch (error) {
                console.error('Error following user:', error);
                showToast('Error following user: ' + error.message, 'error');
            }
        }

        // Unfollow user - MODULAR VERSION
        async function unfollowUser(userId) {
            if (!currentUser) return;
            
            try {
                // Remove from current user's following list
                const currentUserRef = doc(db, 'users', currentUser.uid);
                await updateDoc(currentUserRef, {
                    following: arrayRemove(userId)
                });
                
                // Remove from target user's followers list
                const targetUserRef = doc(db, 'users', userId);
                await updateDoc(targetUserRef, {
                    followers: arrayRemove(currentUser.uid)
                });
                
                // Update userFollowing array
                const index = userFollowing.indexOf(userId);
                if (index > -1) {
                    userFollowing.splice(index, 1);
                }
                
                // Update UI
                const followBtn = document.querySelector(`.follow-btn[data-id="${userId}"]`);
                if (followBtn) {
                    followBtn.textContent = 'Follow';
                    followBtn.classList.remove('following');
                }
                
                // Show success message
                showToast('You have unfollowed this user.');
            } catch (error) {
                console.error('Error unfollowing user:', error);
                showToast('Error unfollowing user: ' + error.message, 'error');
            }
        }

        // Toggle like on article
        async function toggleLike() {
            if (!currentUser) {
                showToast('Please log in to like articles', 'error');
                return;
            }
            
            const article = articles.find(a => a.id === currentArticleId);
            if (!article) return;
            
            try {
                const articleRef = doc(db, 'articles', currentArticleId);
                const isLiked = article.likes && article.likes.includes(currentUser.uid);
                
                if (isLiked) {
                    // Unlike the article
                    await updateDoc(articleRef, {
                        likes: arrayRemove(currentUser.uid)
                    });
                    updateLikeButton(false);
                    showToast('Article unliked');
                } else {
                    // Like the article
                    await updateDoc(articleRef, {
                        likes: arrayUnion(currentUser.uid)
                    });
                    updateLikeButton(true);
                    showToast('Article liked!');
                }
            } catch (error) {
                console.error('Error toggling like:', error);
                showToast('Error toggling like: ' + error.message, 'error');
            }
        }

        // Set comment rating
        function setCommentRating(rating) {
            selectedRating = rating;
            const stars = commentRating.querySelectorAll('.comment-star');
            
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('far');
                    star.classList.add('fas');
                } else {
                    star.classList.remove('fas');
                    star.classList.add('far');
                }
            });
        }

        // Submit comment
        async function submitComment() {
            if (!currentUser) {
                showToast('Please log in to comment', 'error');
                return;
            }
            
            const commentText = commentInput.value.trim();
            if (!commentText) {
                showToast('Please enter a comment', 'error');
                return;
            }
            
            if (selectedRating === 0) {
                showToast('Please rate the article', 'error');
                return;
            }
            
            try {
                const articleRef = doc(db, 'articles', currentArticleId);
                
                // Add comment to the article
                await updateDoc(articleRef, {
                    comments: arrayUnion({
                        authorId: currentUser.uid,
                        authorName: currentUser.displayName || 'Anonymous',
                        text: commentText,
                        rating: selectedRating,
                        timestamp: new Date().toISOString()
                    })
                });
                
                // Clear comment input and rating
                commentInput.value = '';
                setCommentRating(0);
                
                showToast('Comment added successfully!');
                
                // Reload comments to show the new one
                loadComments(currentArticleId);
            } catch (error) {
                console.error('Error submitting comment:', error);
                showToast('Error submitting comment: ' + error.message, 'error');
            }
        }

        // Open share modal
        function openShareModal() {
            if (!currentArticleId) return;
            
            const article = articles.find(a => a.id === currentArticleId);
            if (!article) return;
            
            // Generate shareable link
            const shareLink = `${window.location.origin}${window.location.pathname}?article=${currentArticleId}`;
            shareLinkInput.value = shareLink;
            
            // Show modal
            shareModal.classList.add('active');
        }

        // Close share modal
        function closeShareModal() {
            shareModal.classList.remove('active');
        }

        // Copy share link
        function copyShareLink() {
            shareLinkInput.select();
            document.execCommand('copy');
            showToast('Link copied to clipboard!');
        }

        // Copy article link directly
        function copyArticleLink() {
            if (!currentArticleId) return;
            
            const article = articles.find(a => a.id === currentArticleId);
            if (!article) return;
            
            // Generate shareable link
            const shareLink = `${window.location.origin}${window.location.pathname}?article=${currentArticleId}`;
            
            // Create a temporary input element
            const tempInput = document.createElement('input');
            tempInput.value = shareLink;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
            
            showToast('Article link copied to clipboard!');
        }

        // Share to specific platform
        function shareToPlatform(platform) {
            const article = articles.find(a => a.id === currentArticleId);
            if (!article) return;
            
            const shareLink = shareLinkInput.value;
            const title = encodeURIComponent(article.title);
            const text = encodeURIComponent(article.excerpt);
            
            let shareUrl = '';
            
            switch (platform) {
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareLink)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${title}&url=${encodeURIComponent(shareLink)}`;
                    break;
                case 'linkedin':
                    shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(shareLink)}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${title}%20${encodeURIComponent(shareLink)}`;
                    break;
                case 'email':
                    shareUrl = `mailto:?subject=${title}&body=${text}%0A%0ARead more: ${encodeURIComponent(shareLink)}`;
                    break;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            toast.textContent = message;
            toast.className = 'toast';
            toast.classList.add(type);
            toast.classList.add('active');
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // Check for article parameter in URL
        function checkUrlForArticle() {
            const urlParams = new URLSearchParams(window.location.search);
            const articleId = urlParams.get('article');
            
            if (articleId) {
                // Show the article detail page
                showArticleDetail(articleId);
            }
        }

        // Save settings to localStorage
        function saveSettings() {
            const settings = {
                blogVisibility: blogVisibility.value,
                commentsToggle: commentsToggle.checked,
                autoSaveToggle: autoSaveToggle.checked,
                postSorting: postSorting.value,
                readingTimeToggle: readingTimeToggle.checked,
                authorInfoToggle: authorInfoToggle.checked,
                sharingToggle: sharingToggle.checked,
                themeMode: themeMode.value,
                accentColor: document.querySelector('.color-option.active').getAttribute('data-color'),
                fontStyle: document.querySelector('.font-option.active').getAttribute('data-font'),
                layoutMode: document.querySelector('.layout-option.active').getAttribute('data-layout'),
                cardStyle: document.querySelector('.card-style-option.active').getAttribute('data-style'),
                followerNotificationToggle: followerNotificationToggle.checked,
                commentNotificationToggle: commentNotificationToggle.checked,
                publishNotificationToggle: publishNotificationToggle.checked,
                analyticsReportToggle: analyticsReportToggle.checked,
                soundAlertToggle: soundAlertToggle.checked,
                followersVisibility: followersVisibility.value,
                messagesToggle: messagesToggle.checked,
                autoShareToggle: autoShareToggle.checked,
                profileVisibility: profileVisibility.value,
                commentPermissions: commentPermissions.value,
                onlineStatusToggle: onlineStatusToggle.checked,
                twoFactorToggle: twoFactorToggle.checked
            };
            
            localStorage.setItem('bloghubSettings', JSON.stringify(settings));
            applySettings(settings);
        }

        // Load settings from localStorage
        function loadSettings() {
            const savedSettings = localStorage.getItem('bloghubSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                
                // Apply settings to form elements
                blogVisibility.value = settings.blogVisibility || 'public';
                commentsToggle.checked = settings.commentsToggle !== false;
                autoSaveToggle.checked = settings.autoSaveToggle !== false;
                postSorting.value = settings.postSorting || 'latest';
                readingTimeToggle.checked = settings.readingTimeToggle !== false;
                authorInfoToggle.checked = settings.authorInfoToggle !== false;
                sharingToggle.checked = settings.sharingToggle !== false;
                themeMode.value = settings.themeMode || 'dark';
                
                // Apply color option
                const colorOption = document.querySelector(`.color-option[data-color="${settings.accentColor || '#3498db'}"]`);
                if (colorOption) {
                    colorOptions.forEach(opt => opt.classList.remove('active'));
                    colorOption.classList.add('active');
                }
                
                // Apply font option
                const fontOption = document.querySelector(`.font-option[data-font="${settings.fontStyle || 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif'}"]`);
                if (fontOption) {
                    fontOptions.forEach(opt => opt.classList.remove('active'));
                    fontOption.classList.add('active');
                }
                
                // Apply layout option
                const layoutOption = document.querySelector(`.layout-option[data-layout="${settings.layoutMode || 'full-width'}"]`);
                if (layoutOption) {
                    layoutOptions.forEach(opt => opt.classList.remove('active'));
                    layoutOption.classList.add('active');
                }
                
                // Apply card style option
                const cardStyleOption = document.querySelector(`.card-style-option[data-style="${settings.cardStyle || 'minimal'}"]`);
                if (cardStyleOption) {
                    cardStyleOptions.forEach(opt => opt.classList.remove('active'));
                    cardStyleOption.classList.add('active');
                }
                
                followerNotificationToggle.checked = settings.followerNotificationToggle !== false;
                commentNotificationToggle.checked = settings.commentNotificationToggle !== false;
                publishNotificationToggle.checked = settings.publishNotificationToggle !== false;
                analyticsReportToggle.checked = settings.analyticsReportToggle || false;
                soundAlertToggle.checked = settings.soundAlertToggle !== false;
                followersVisibility.value = settings.followersVisibility || 'public';
                messagesToggle.checked = settings.messagesToggle !== false;
                autoShareToggle.checked = settings.autoShareToggle || false;
                profileVisibility.value = settings.profileVisibility || 'public';
                commentPermissions.value = settings.commentPermissions || 'everyone';
                onlineStatusToggle.checked = settings.onlineStatusToggle !== false;
                twoFactorToggle.checked = settings.twoFactorToggle || false;
                
                // Apply visual settings
                applySettings(settings);
            }
        }

        // Apply settings to the UI
        function applySettings(settings) {
            // Apply accent color
            if (settings.accentColor) {
                document.documentElement.style.setProperty('--accent-color', settings.accentColor);
                document.documentElement.style.setProperty('--hover-color', adjustColor(settings.accentColor, 20));
            }
            
            // Apply font style
            if (settings.fontStyle) {
                document.body.style.fontFamily = settings.fontStyle;
            }
            
            // Apply theme mode
            if (settings.themeMode === 'light') {
                document.documentElement.style.setProperty('--primary-bg', '#f5f5f5');
                document.documentElement.style.setProperty('--secondary-bg', '#ffffff');
                document.documentElement.style.setProperty('--card-bg', '#ffffff');
                document.documentElement.style.setProperty('--text-color', '#333333');
                document.documentElement.style.setProperty('--text-secondary', '#666666');
            } else {
                document.documentElement.style.setProperty('--primary-bg', '#0a0a1a');
                document.documentElement.style.setProperty('--secondary-bg', '#15152b');
                document.documentElement.style.setProperty('--card-bg', '#1e1e3a');
                document.documentElement.style.setProperty('--text-color', '#ffffff');
                document.documentElement.style.setProperty('--text-secondary', '#b0b0cc');
            }
        }

        // Helper function to adjust color brightness
        function adjustColor(color, amount) {
            return '#' + color.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));
        }

        // Delete account
        async function deleteAccount() {
            if (!currentUser) return;
            
            const confirmDelete = confirm('Are you sure you want to delete your account? This action cannot be undone.');
            if (!confirmDelete) return;
            
            try {
                // Delete user from Firebase Auth
                await deleteUser(currentUser);
                console.log('User account deleted');
                showToast('Account deleted successfully', 'success');
                
                // In a real app, you would also delete user data from Firestore
                // For this demo, we'll just sign out
                await signOut(auth);
            } catch (error) {
                console.error('Error deleting account:', error);
                showToast('Error deleting account: ' + error.message, 'error');
            }
        }

        // Download data
        function downloadData() {
            alert('Data export feature would be implemented in a production app. This would generate a file with all your BlogHub data.');
        }

        // Manage blocked users
        function manageBlockedUsers() {
            alert('Blocked users management would be implemented in a production app.');
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>